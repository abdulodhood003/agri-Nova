<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AgriVeda AI - AI-Powered Personal Farming Assistant</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://unpkg.com/framer-motion@10/dist/framer-motion.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        *{
            font-family: 'Inter', sans-serif;
        }
        
        /* Hackathon-Ready Gradients */
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .hero-gradient {
            background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 25%, #ec4899 50%, #f59e0b 75%, #10b981 100%);
            background-size: 400% 400%;
            animation: gradientShift 8s ease infinite;
        }
        
        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        .glass-effect {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
        }
        
        /* Neumorphic Design Elements */
        .neomorphic {
            background: #f0f0f3;
            border-radius: 20px;
            box-shadow: 
                20px 20px 60px #bebebe,
                -20px -20px 60px #ffffff;
        }
        
        .neomorphic-inset {
            background: #f0f0f3;
            border-radius: 20px;
            box-shadow: 
                inset 20px 20px 60px #bebebe,
                inset -20px -20px 60px #ffffff;
        }
        
        /* Advanced Hover Effects */
        .card-hover {
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }
        
        .card-hover::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
            transition: left 0.5s;
        }
        
        .card-hover:hover::before {
            left: 100%;
        }
        
        .card-hover:hover {
            transform: translateY(-12px) scale(1.03);
            box-shadow: 0 35px 80px -15px rgba(0, 0, 0, 0.3);
        }
        
        /* Floating Animations */
        .weather-animation {
            animation: float 6s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            33% { transform: translateY(-15px) rotate(3deg); }
            66% { transform: translateY(-8px) rotate(-2deg); }
        }
        
        /* Pulsing Glow Effects */
        .pulse-glow {
            animation: pulseGlow 3s infinite;
        }
        
        @keyframes pulseGlow {
            0%, 100% { 
                box-shadow: 0 0 20px rgba(102, 126, 234, 0.4),
                           0 0 40px rgba(102, 126, 234, 0.2),
                           0 0 80px rgba(102, 126, 234, 0.1);
            }
            50% { 
                box-shadow: 0 0 40px rgba(102, 126, 234, 0.8),
                           0 0 80px rgba(102, 126, 234, 0.4),
                           0 0 120px rgba(102, 126, 234, 0.2);
            }
        }
        
        /* Morphing Button Effect */
        .morph-button {
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }
        
        .morph-button::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }
        
        .morph-button:hover::after {
            width: 300px;
            height: 300px;
        }
        
        /* Demo-Ready Entrance Animations */
        .slide-up {
            animation: slideUp 1.2s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        @keyframes slideUp {
            from { 
                transform: translateY(80px); 
                opacity: 0; 
                filter: blur(10px);
            }
            to { 
                transform: translateY(0); 
                opacity: 1; 
                filter: blur(0px);
            }
        }
        
        .fade-in-scale {
            animation: fadeInScale 1s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        @keyframes fadeInScale {
            from {
                transform: scale(0.8);
                opacity: 0;
            }
            to {
                transform: scale(1);
                opacity: 1;
            }
        }
        
        /* Enhanced Typing Effect */
        .typing-effect {
            overflow: hidden;
            border-right: 3px solid #4f46e5;
            white-space: nowrap;
            animation: typing 4s steps(40, end), blink-caret 1s step-end infinite;
            background: linear-gradient(45deg, #4f46e5, #7c3aed, #ec4899);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        @keyframes typing {
            from { width: 0; }
            to { width: 100%; }
        }
        
        @keyframes blink-caret {
            from, to { border-color: transparent; }
            50% { border-color: #4f46e5; }
        }
        
        /* Staggered Animation for Lists */
        .stagger-animation {
            animation: staggerIn 0.8s ease-out both;
        }
        
        .stagger-animation:nth-child(1) { animation-delay: 0.1s; }
        .stagger-animation:nth-child(2) { animation-delay: 0.2s; }
        .stagger-animation:nth-child(3) { animation-delay: 0.3s; }
        .stagger-animation:nth-child(4) { animation-delay: 0.4s; }
        .stagger-animation:nth-child(5) { animation-delay: 0.5s; }
        
        @keyframes staggerIn {
            from {
                transform: translateX(-50px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        .weather-card {
            background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
        }
        
        .crop-card {
            background: linear-gradient(135deg, #00b894 0%, #00a085 100%);
        }
        
        .alert-card {
            background: linear-gradient(135deg, #fdcb6e 0%, #e17055 100%);
        }
        
        .analytics-card {
            background: linear-gradient(135deg, #a29bfe 0%, #6c5ce7 100%);
        }
        
        .nav-item {
            position: relative;
            overflow: hidden;
        }
        
        .nav-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }
        
        .nav-item:hover::before {
            left: 100%;
        }
        
        .loading-spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .success-animation {
            animation: successPulse 0.6s ease-in-out;
        }
        
        @keyframes successPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        /* FAB Animation Styles */
        #fabItems button {
            transform: scale(0);
            opacity: 0;
            transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }
        
        .fab-bounce {
            animation: fabBounce 0.6s ease-in-out;
        }
        
        @keyframes fabBounce {
            0%, 20%, 53%, 80%, 100% { transform: translate3d(0,0,0); }
            40%, 43% { transform: translate3d(0, -8px, 0); }
            70% { transform: translate3d(0, -4px, 0); }
            90% { transform: translate3d(0, -2px, 0); }
        }
    </style>
</head>
<body class="bg-gray-50 overflow-x-hidden">
    <!-- Navigation -->
    <nav class="gradient-bg text-white shadow-2xl sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-20">
                <div class="flex items-center space-x-4">
                    <div class="text-3xl font-bold flex items-center">
                        <div class="w-12 h-12 bg-gradient-to-br from-green-400 to-blue-500 rounded-2xl flex items-center justify-center mr-3 shadow-lg">
                            <i class="fas fa-brain text-white text-xl"></i>
                        </div>
                        <span id="appTitle" class="typing-effect">AgriVeda AI</span>
                        <span class="text-xs bg-gradient-to-r from-yellow-400 to-orange-400 text-black px-3 py-1 rounded-full ml-3 font-black">BETA</span>
                    </div>
                </div>
                
                <div class="hidden lg:flex items-center space-x-2">
                    <button onclick="showSection('dashboard')" class="nav-item nav-btn px-6 py-3 rounded-2xl text-sm font-bold hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center space-x-2 bg-white bg-opacity-20 shadow-lg" data-section="dashboard">
                        <i class="fas fa-home"></i>
                        <span>Home</span>
                    </button>
                    <button onclick="showSection('weather')" class="nav-item nav-btn px-6 py-3 rounded-2xl text-sm font-bold hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center space-x-2" data-section="weather">
                        <i class="fas fa-cloud-sun"></i>
                        <span>Weather AI</span>
                    </button>
                    <button onclick="showSection('crops')" class="nav-item nav-btn px-6 py-3 rounded-2xl text-sm font-bold hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center space-x-2" data-section="crops">
                        <i class="fas fa-seedling"></i>
                        <span>Crop AI</span>
                    </button>
                    <button onclick="showSection('disease')" class="nav-item nav-btn px-6 py-3 rounded-2xl text-sm font-bold hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center space-x-2" data-section="disease">
                        <i class="fas fa-microscope"></i>
                        <span>Disease AI</span>
                    </button>
                    <button onclick="showSection('fertilizer')" class="nav-item nav-btn px-6 py-3 rounded-2xl text-sm font-bold hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center space-x-2" data-section="fertilizer">
                        <i class="fas fa-flask"></i>
                        <span>Fertilizer AI</span>
                    </button>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="hidden md:flex items-center space-x-3">
                        <!-- Enhanced Location Selector -->
                        <button onclick="showLocationSelector()" class="bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-xl px-4 py-3 text-sm font-bold focus:outline-none focus:ring-2 focus:ring-white focus:ring-opacity-50 hover:from-blue-600 hover:to-purple-700 transition-all duration-300 flex items-center space-x-2 shadow-lg">
                            <i class="fas fa-map-marker-alt text-yellow-300"></i>
                            <span id="selectedLocationDisplay">Kerala - Wayanad</span>
                            <i class="fas fa-chevron-down"></i>
                        </button>
                        
                        <!-- Enhanced Language Selector -->
                        <select id="languageSelect" class="bg-gradient-to-r from-green-500 to-teal-600 text-white rounded-xl px-4 py-3 text-sm font-bold focus:outline-none focus:ring-2 focus:ring-white focus:ring-opacity-50 hover:from-green-600 hover:to-teal-700 transition-all duration-300 shadow-lg cursor-pointer">
                            <option value="en" class="text-gray-800 bg-white">🇺🇸 English</option>
                            <option value="ta" class="text-gray-800 bg-white">🇮🇳 தமிழ்</option>
                        </select>
                    </div>
                    
                    <!-- Mobile menu button -->
                    <button onclick="toggleMobileMenu()" class="lg:hidden bg-gradient-to-r from-orange-500 to-red-600 text-white p-3 rounded-xl hover:from-orange-600 hover:to-red-700 transition-all duration-300 shadow-lg">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Mobile Navigation Menu -->
    <div id="mobileMenu" class="lg:hidden bg-white shadow-lg border-b border-gray-200 hidden">
        <div class="px-4 py-6 space-y-4">
            <!-- Mobile Navigation Links -->
            <div class="space-y-2">
                <button onclick="showSection('dashboard'); toggleMobileMenu();" class="w-full flex items-center space-x-3 px-4 py-3 text-white bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 rounded-xl transition-all duration-300 shadow-lg">
                    <i class="fas fa-tachometer-alt"></i>
                    <span class="font-medium">Dashboard</span>
                </button>
                <button onclick="showSection('weather'); toggleMobileMenu();" class="w-full flex items-center space-x-3 px-4 py-3 text-white bg-gradient-to-r from-cyan-500 to-blue-600 hover:from-cyan-600 hover:to-blue-700 rounded-xl transition-all duration-300 shadow-lg">
                    <i class="fas fa-cloud-sun"></i>
                    <span class="font-medium">Weather AI</span>
                </button>
                <button onclick="showSection('crops'); toggleMobileMenu();" class="w-full flex items-center space-x-3 px-4 py-3 text-white bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 rounded-xl transition-all duration-300 shadow-lg">
                    <i class="fas fa-leaf"></i>
                    <span class="font-medium">Crop AI</span>
                </button>
                <button onclick="showSection('disease'); toggleMobileMenu();" class="w-full flex items-center space-x-3 px-4 py-3 text-white bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 rounded-xl transition-all duration-300 shadow-lg">
                    <i class="fas fa-microscope"></i>
                    <span class="font-medium">Disease AI</span>
                </button>
                <button onclick="showSection('fertilizer'); toggleMobileMenu();" class="w-full flex items-center space-x-3 px-4 py-3 text-white bg-gradient-to-r from-orange-500 to-red-600 hover:from-orange-600 hover:to-red-700 rounded-xl transition-all duration-300 shadow-lg">
                    <i class="fas fa-flask"></i>
                    <span class="font-medium">Fertilizer AI</span>
                </button>
            </div>
            
            <!-- Mobile Settings -->
            <div class="border-t border-gray-200 pt-4 space-y-4">
                <div>
                    <button onclick="showLocationSelector()" class="w-full p-3 border border-gray-300 rounded-xl focus:border-blue-500 focus:outline-none bg-blue-50 hover:bg-blue-100 transition-colors flex items-center justify-between">
                        <div class="flex items-center space-x-2">
                            <i class="fas fa-map-marker-alt text-blue-600"></i>
                            <span class="font-medium text-gray-700">Select Location</span>
                        </div>
                        <div class="text-right">
                            <div class="text-sm font-semibold text-blue-600" id="mobileLocationDisplay">Kerala - Wayanad</div>
                            <div class="text-xs text-gray-500">Tap to change</div>
                        </div>
                    </button>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Language</label>
                    <select id="mobileLanguageSelect" class="w-full p-3 border border-gray-300 rounded-xl focus:border-blue-500 focus:outline-none">
                        <option value="en">English</option>
                        <option value="ta">தமிழ்</option>
                    </select>
                </div>
            </div>
        </div>
    </div>

    <!-- Breadcrumb Navigation -->
    <div id="breadcrumbNav" class="bg-white shadow-sm border-b border-gray-200 hidden">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <nav class="flex items-center space-x-4" aria-label="Breadcrumb">
                    <button onclick="showSection('dashboard')" class="flex items-center text-gray-500 hover:text-gray-700 transition-colors">
                        <i class="fas fa-home mr-2"></i>
                        <span>Home</span>
                    </button>
                    <i class="fas fa-chevron-right text-gray-400"></i>
                    <span id="currentSectionName" class="text-gray-900 font-semibold">Dashboard</span>
                </nav>
                
                <button onclick="goBack()" class="flex items-center space-x-2 bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg transition-colors">
                    <i class="fas fa-arrow-left"></i>
                    <span>Back</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Dashboard Section -->
    <div id="dashboard" class="section">
        <!-- Hero Section - Hackathon Ready -->
        <div class="hero-gradient text-white py-24 relative overflow-hidden">
            <!-- Animated Background Elements -->
            <div class="absolute inset-0 overflow-hidden">
                <div class="absolute -top-40 -right-40 w-80 h-80 bg-white bg-opacity-10 rounded-full blur-3xl animate-pulse"></div>
                <div class="absolute -bottom-40 -left-40 w-96 h-96 bg-white bg-opacity-5 rounded-full blur-3xl animate-pulse" style="animation-delay: 1s;"></div>
            </div>
            
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center relative z-10">
                <!-- AI Badge -->
                <div class="inline-flex items-center px-6 py-3 rounded-full glass-effect mb-8 fade-in-scale">
                    <div class="w-3 h-3 bg-green-400 rounded-full mr-3 pulse-glow"></div>
                    <span class="text-sm font-semibold">🚀 AI-Powered • Real-time • Production Ready</span>
                </div>
                
                <h1 class="text-6xl md:text-8xl font-black mb-8 slide-up">
                    <span class="typing-effect">AgriVeda AI</span>
                    <span class="block text-4xl md:text-5xl font-bold mt-4 text-transparent bg-clip-text bg-gradient-to-r from-yellow-300 via-green-300 to-blue-300">
                        Your Personal Farming Assistant
                    </span>
                </h1>
                
                <p class="text-xl md:text-2xl mb-12 max-w-4xl mx-auto opacity-90 slide-up leading-relaxed">
                    🌱 <strong>Increase yields by 40%</strong> with AI-powered insights<br>
                    🤖 Real-time crop monitoring & disease detection<br>
                    📊 Smart analytics that save time & money
                </p>
                
                <!-- CTA Buttons with Enhanced Effects -->
                <div class="flex flex-col sm:flex-row gap-6 justify-center slide-up">
                    <button onclick="showSection('assistant')" class="morph-button glass-effect px-10 py-5 rounded-2xl font-bold text-xl hover:bg-white hover:bg-opacity-20 transition-all duration-300 pulse-glow relative z-10">
                        <i class="fas fa-robot mr-3"></i>
                        Try AI Assistant
                        <span class="block text-sm opacity-75 mt-1">Voice & Text • Instant Responses</span>
                    </button>
                    <button onclick="showSection('analytics')" class="morph-button border-2 border-white border-opacity-30 px-10 py-5 rounded-2xl font-bold text-xl hover:bg-white hover:bg-opacity-10 transition-all duration-300 relative z-10">
                        <i class="fas fa-chart-line mr-3"></i>
                        View Live Demo
                        <span class="block text-sm opacity-75 mt-1">See Real Results</span>
                    </button>
                </div>
                
                <!-- Contributors Link -->
                <div class="mt-12 slide-up">
                    <button onclick="showSection('contributors')" class="text-white hover:text-yellow-300 transition-colors text-lg font-semibold underline decoration-2 underline-offset-4">
                        <i class="fas fa-users mr-2"></i>
                        Meet Our Amazing Team →
                    </button>
                </div>
                
                <!-- Social Proof -->
                <div class="mt-16 flex flex-wrap justify-center items-center gap-8 opacity-80">
                    <div class="flex items-center space-x-2">
                        <div class="flex -space-x-2">
                            <div class="w-8 h-8 bg-green-500 rounded-full border-2 border-white"></div>
                            <div class="w-8 h-8 bg-blue-500 rounded-full border-2 border-white"></div>
                            <div class="w-8 h-8 bg-purple-500 rounded-full border-2 border-white"></div>
                        </div>
                        <span class="text-sm font-semibold">2,500+ Farmers Trust Us</span>
                    </div>
                    <div class="flex items-center space-x-2">
                        <i class="fas fa-star text-yellow-400"></i>
                        <span class="text-sm font-semibold">4.9/5 Rating</span>
                    </div>
                    <div class="flex items-center space-x-2">
                        <i class="fas fa-seedling text-green-400"></i>
                        <span class="text-sm font-semibold">40% Yield Increase</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Real-time Stats Dashboard -->
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16">
            <div class="text-center mb-12">
                <h2 class="text-4xl font-bold text-gray-900 mb-4">Live Agricultural Intelligence</h2>
                <p class="text-xl text-gray-600">Real-time data from your selected region</p>
            </div>

            <!-- Live AI Dashboard - Hackathon Ready -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-12">
                <!-- Real-time Weather Card -->
                <div class="stagger-animation weather-card text-white rounded-3xl p-8 card-hover relative overflow-hidden">
                    <div class="absolute top-0 right-0 w-32 h-32 bg-white bg-opacity-10 rounded-full -mr-16 -mt-16"></div>
                    <div class="relative z-10">
                        <div class="flex items-center justify-between mb-4">
                            <div>
                                <h3 class="text-lg font-bold">🌤️ Live Weather</h3>
                                <p id="locationName" class="text-sm opacity-75">AI-Powered Forecast</p>
                            </div>
                            <div class="text-right">
                                <div id="weatherLoader" class="loading-spinner hidden"></div>
                                <i id="weatherIcon" class="fas fa-sun text-3xl weather-animation"></i>
                            </div>
                        </div>
                        <div class="mb-4">
                            <div id="currentTemp" class="text-5xl font-black mb-2">28°C</div>
                            <div id="weatherDesc" class="text-sm opacity-90">Perfect Growing Conditions</div>
                        </div>
                        <div class="grid grid-cols-2 gap-4 text-sm">
                            <div class="bg-white bg-opacity-20 rounded-lg p-2">
                                <div class="opacity-75">Humidity</div>
                                <div id="currentHumidity" class="font-bold text-lg">72%</div>
                            </div>
                            <div class="bg-white bg-opacity-20 rounded-lg p-2">
                                <div class="opacity-75">Wind</div>
                                <div id="windSpeed" class="font-bold text-lg">12 km/h</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- AI Health Score Card -->
                <div class="stagger-animation crop-card text-white rounded-3xl p-8 card-hover relative overflow-hidden">
                    <div class="absolute top-0 right-0 w-32 h-32 bg-white bg-opacity-10 rounded-full -mr-16 -mt-16"></div>
                    <div class="relative z-10">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-lg font-bold">🤖 AI Health Score</h3>
                            <i class="fas fa-brain text-3xl weather-animation"></i>
                        </div>
                        <div class="text-6xl font-black mb-2">96<span class="text-2xl">%</span></div>
                        <div class="text-sm opacity-90 mb-4">Optimal Crop Conditions</div>
                        <div class="flex items-center justify-between text-sm">
                            <div class="flex items-center">
                                <i class="fas fa-arrow-up mr-1 text-green-300"></i>
                                <span>+8% this week</span>
                            </div>
                            <div class="bg-green-400 bg-opacity-30 px-2 py-1 rounded-full text-xs font-bold">
                                EXCELLENT
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Smart Alerts Card -->
                <div class="stagger-animation alert-card text-white rounded-3xl p-8 card-hover relative overflow-hidden">
                    <div class="absolute top-0 right-0 w-32 h-32 bg-white bg-opacity-10 rounded-full -mr-16 -mt-16"></div>
                    <div class="relative z-10">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-lg font-bold">⚡ Smart Alerts</h3>
                            <i class="fas fa-bell text-3xl weather-animation"></i>
                        </div>
                        <div class="text-6xl font-black mb-2" id="alertCount">5</div>
                        <div class="text-sm opacity-90 mb-4">AI Recommendations</div>
                        <div class="space-y-2">
                            <div class="flex items-center text-xs">
                                <div class="w-2 h-2 bg-green-400 rounded-full mr-2 pulse-glow"></div>
                                <span>Irrigation optimal</span>
                            </div>
                            <div class="flex items-center text-xs">
                                <div class="w-2 h-2 bg-yellow-400 rounded-full mr-2 pulse-glow"></div>
                                <span>Fertilizer due in 2 days</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Revenue Impact Card -->
                <div class="stagger-animation analytics-card text-white rounded-3xl p-8 card-hover relative overflow-hidden">
                    <div class="absolute top-0 right-0 w-32 h-32 bg-white bg-opacity-10 rounded-full -mr-16 -mt-16"></div>
                    <div class="relative z-10">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-lg font-bold">💰 Revenue Impact</h3>
                            <i class="fas fa-chart-line text-3xl weather-animation"></i>
                        </div>
                        <div class="text-5xl font-black mb-2">₹2.4L</div>
                        <div class="text-sm opacity-90 mb-4">Projected Monthly Income</div>
                        <div class="flex items-center justify-between text-sm">
                            <div class="flex items-center">
                                <i class="fas fa-arrow-up mr-1 text-green-300"></i>
                                <span>+40% vs traditional</span>
                            </div>
                            <div class="bg-green-400 bg-opacity-30 px-2 py-1 rounded-full text-xs font-bold">
                                HIGH ROI
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Live AI Insights - Hackathon Showcase -->
            <div class="bg-white rounded-3xl shadow-2xl p-8 mb-12 relative overflow-hidden">
                <!-- Background Pattern -->
                <div class="absolute inset-0 opacity-5">
                    <div class="absolute inset-0" style="background-image: radial-gradient(circle at 1px 1px, rgba(0,0,0,0.15) 1px, transparent 0); background-size: 20px 20px;"></div>
                </div>
                
                <div class="relative z-10">
                    <div class="flex items-center justify-between mb-8">
                        <div>
                            <h2 class="text-3xl font-black text-gray-900 mb-2">🧠 Live AI Insights</h2>
                            <p class="text-gray-600">Real-time analysis powered by machine learning</p>
                        </div>
                        <div class="flex items-center space-x-4">
                            <div class="flex items-center space-x-2 bg-green-100 px-4 py-2 rounded-full">
                                <div class="w-3 h-3 bg-green-500 rounded-full pulse-glow"></div>
                                <span class="text-sm font-bold text-green-800">AI Active</span>
                            </div>
                            <div class="text-sm text-gray-500">
                                Last updated: <span class="font-semibold">2 seconds ago</span>
                            </div>
                        </div>
                    </div>
                    
                    <div id="liveAlerts" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- AI insights will be populated here with enhanced styling -->
                    </div>
                    
                    <!-- AI Processing Indicator -->
                    <div class="mt-8 flex items-center justify-center space-x-4 p-6 bg-gradient-to-r from-blue-50 to-purple-50 rounded-2xl">
                        <div class="flex space-x-1">
                            <div class="w-2 h-2 bg-blue-500 rounded-full animate-bounce"></div>
                            <div class="w-2 h-2 bg-purple-500 rounded-full animate-bounce" style="animation-delay: 0.1s;"></div>
                            <div class="w-2 h-2 bg-pink-500 rounded-full animate-bounce" style="animation-delay: 0.2s;"></div>
                        </div>
                        <span class="text-sm font-semibold text-gray-700">AI continuously analyzing 50+ data points</span>
                    </div>
                </div>
            </div>

            <!-- AI-Powered Features Showcase -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <!-- Weather Intelligence -->
                <div class="stagger-animation bg-white rounded-3xl shadow-xl p-8 card-hover text-center relative overflow-hidden group">
                    <div class="absolute inset-0 bg-gradient-to-br from-blue-500 to-cyan-500 opacity-0 group-hover:opacity-10 transition-opacity duration-500"></div>
                    <div class="relative z-10">
                        <div class="w-20 h-20 bg-gradient-to-br from-blue-500 to-cyan-500 rounded-3xl flex items-center justify-center mx-auto mb-6 shadow-lg">
                            <i class="fas fa-cloud-sun text-3xl text-white"></i>
                        </div>
                        <h3 class="text-2xl font-black text-gray-900 mb-3">🌤️ Weather AI</h3>
                        <p class="text-gray-600 mb-6 leading-relaxed">Hyper-local weather predictions with farming-specific insights and automated alerts</p>
                        <div class="mb-6 space-y-2">
                            <div class="flex items-center justify-center text-sm text-gray-500">
                                <i class="fas fa-check-circle text-green-500 mr-2"></i>
                                <span>7-day precision forecasts</span>
                            </div>
                            <div class="flex items-center justify-center text-sm text-gray-500">
                                <i class="fas fa-check-circle text-green-500 mr-2"></i>
                                <span>Irrigation timing alerts</span>
                            </div>
                        </div>
                        <button onclick="showSection('weather')" class="morph-button bg-gradient-to-r from-blue-500 to-cyan-500 text-white px-8 py-4 rounded-2xl hover:from-blue-600 hover:to-cyan-600 transition-all duration-300 font-bold text-lg shadow-lg">
                            <i class="fas fa-brain mr-2"></i>
                            Try Weather AI
                        </button>
                    </div>
                </div>

                <!-- Crop Intelligence -->
                <div class="stagger-animation bg-white rounded-3xl shadow-xl p-8 card-hover text-center relative overflow-hidden group">
                    <div class="absolute inset-0 bg-gradient-to-br from-green-500 to-emerald-500 opacity-0 group-hover:opacity-10 transition-opacity duration-500"></div>
                    <div class="relative z-10">
                        <div class="w-20 h-20 bg-gradient-to-br from-green-500 to-emerald-500 rounded-3xl flex items-center justify-center mx-auto mb-6 shadow-lg">
                            <i class="fas fa-seedling text-3xl text-white"></i>
                        </div>
                        <h3 class="text-2xl font-black text-gray-900 mb-3">🌱 Crop AI</h3>
                        <p class="text-gray-600 mb-6 leading-relaxed">Smart crop selection based on soil analysis, market trends, and climate data</p>
                        <div class="mb-6 space-y-2">
                            <div class="flex items-center justify-center text-sm text-gray-500">
                                <i class="fas fa-check-circle text-green-500 mr-2"></i>
                                <span>40% higher yields</span>
                            </div>
                            <div class="flex items-center justify-center text-sm text-gray-500">
                                <i class="fas fa-check-circle text-green-500 mr-2"></i>
                                <span>Market price predictions</span>
                            </div>
                        </div>
                        <button onclick="showSection('crops')" class="morph-button bg-gradient-to-r from-green-500 to-emerald-500 text-white px-8 py-4 rounded-2xl hover:from-green-600 hover:to-emerald-600 transition-all duration-300 font-bold text-lg shadow-lg">
                            <i class="fas fa-leaf mr-2"></i>
                            Get AI Recommendations
                        </button>
                    </div>
                </div>

                <!-- Disease Detection AI -->
                <div class="stagger-animation bg-white rounded-3xl shadow-xl p-8 card-hover text-center relative overflow-hidden group">
                    <div class="absolute inset-0 bg-gradient-to-br from-purple-500 to-pink-500 opacity-0 group-hover:opacity-10 transition-opacity duration-500"></div>
                    <div class="relative z-10">
                        <div class="w-20 h-20 bg-gradient-to-br from-purple-500 to-pink-500 rounded-3xl flex items-center justify-center mx-auto mb-6 shadow-lg">
                            <i class="fas fa-microscope text-3xl text-white"></i>
                        </div>
                        <h3 class="text-2xl font-black text-gray-900 mb-3">🔬 Disease AI</h3>
                        <p class="text-gray-600 mb-6 leading-relaxed">Instant plant disease detection using computer vision and deep learning models</p>
                        <div class="mb-6 space-y-2">
                            <div class="flex items-center justify-center text-sm text-gray-500">
                                <i class="fas fa-check-circle text-green-500 mr-2"></i>
                                <span>95% accuracy rate</span>
                            </div>
                            <div class="flex items-center justify-center text-sm text-gray-500">
                                <i class="fas fa-check-circle text-green-500 mr-2"></i>
                                <span>Instant diagnosis</span>
                            </div>
                        </div>
                        <button onclick="showSection('disease')" class="morph-button bg-gradient-to-r from-purple-500 to-pink-500 text-white px-8 py-4 rounded-2xl hover:from-purple-600 hover:to-pink-600 transition-all duration-300 font-bold text-lg shadow-lg">
                            <i class="fas fa-camera mr-2"></i>
                            Scan Plant Now
                        </button>
                    </div>
                </div>

                <!-- Fertilizer Intelligence -->
                <div class="stagger-animation bg-white rounded-3xl shadow-xl p-8 card-hover text-center relative overflow-hidden group">
                    <div class="absolute inset-0 bg-gradient-to-br from-orange-500 to-red-500 opacity-0 group-hover:opacity-10 transition-opacity duration-500"></div>
                    <div class="relative z-10">
                        <div class="w-20 h-20 bg-gradient-to-br from-orange-500 to-red-500 rounded-3xl flex items-center justify-center mx-auto mb-6 shadow-lg">
                            <i class="fas fa-flask text-3xl text-white"></i>
                        </div>
                        <h3 class="text-2xl font-black text-gray-900 mb-3">🧪 Fertilizer AI</h3>
                        <p class="text-gray-600 mb-6 leading-relaxed">Precision nutrient calculations based on soil analysis and crop requirements</p>
                        <div class="mb-6 space-y-2">
                            <div class="flex items-center justify-center text-sm text-gray-500">
                                <i class="fas fa-check-circle text-green-500 mr-2"></i>
                                <span>30% cost reduction</span>
                            </div>
                            <div class="flex items-center justify-center text-sm text-gray-500">
                                <i class="fas fa-check-circle text-green-500 mr-2"></i>
                                <span>Precise NPK calculations</span>
                            </div>
                        </div>
                        <button onclick="showSection('fertilizer')" class="morph-button bg-gradient-to-r from-orange-500 to-red-500 text-white px-8 py-4 rounded-2xl hover:from-orange-600 hover:to-red-600 transition-all duration-300 font-bold text-lg shadow-lg">
                            <i class="fas fa-calculator mr-2"></i>
                            Calculate Fertilizer
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Weather Section -->
    <div id="weather" class="section hidden">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16">
            <div class="text-center mb-12">
                <h1 class="text-4xl font-bold text-gray-900 mb-4">Real-Time Weather Intelligence</h1>
                <p class="text-xl text-gray-600">Powered by live meteorological data</p>
            </div>

            <!-- Current Weather Hero -->
            <div class="bg-gradient-to-br from-blue-500 to-purple-600 text-white rounded-3xl p-12 mb-12 relative overflow-hidden">
                <div class="absolute top-0 right-0 w-64 h-64 bg-white bg-opacity-10 rounded-full -mr-32 -mt-32"></div>
                <div class="absolute bottom-0 left-0 w-48 h-48 bg-white bg-opacity-10 rounded-full -ml-24 -mb-24"></div>
                
                <div class="relative z-10 grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
                    <div>
                        <div class="flex items-center mb-4">
                            <i class="fas fa-map-marker-alt mr-2"></i>
                            <span id="currentLocation" class="text-lg">Loading location...</span>
                        </div>
                        <div id="mainTemp" class="text-7xl font-bold mb-4">--°C</div>
                        <div id="mainWeatherDesc" class="text-2xl mb-6 opacity-90">Loading...</div>
                        <div class="grid grid-cols-2 gap-6">
                            <div>
                                <div class="text-sm opacity-75">Feels like</div>
                                <div id="feelsLike" class="text-xl font-semibold">--°C</div>
                            </div>
                            <div>
                                <div class="text-sm opacity-75">UV Index</div>
                                <div id="uvIndex" class="text-xl font-semibold">--</div>
                            </div>
                            <div>
                                <div class="text-sm opacity-75">Pressure</div>
                                <div id="pressure" class="text-xl font-semibold">-- hPa</div>
                            </div>
                            <div>
                                <div class="text-sm opacity-75">Visibility</div>
                                <div id="visibility" class="text-xl font-semibold">-- km</div>
                            </div>
                        </div>
                    </div>
                    <div class="text-center">
                        <div id="mainWeatherIcon" class="text-9xl mb-4 weather-animation">
                            <i class="fas fa-sun"></i>
                        </div>
                        <div class="text-sm opacity-75">Last updated: <span id="lastUpdated">--</span></div>
                    </div>
                </div>
            </div>

            <!-- 7-Day Forecast -->
            <div class="bg-white rounded-3xl shadow-2xl p-8 mb-12">
                <h2 class="text-2xl font-bold text-gray-900 mb-6">7-Day Forecast</h2>
                <div id="weeklyForecast" class="grid grid-cols-1 md:grid-cols-7 gap-4">
                    <!-- Forecast cards will be populated here -->
                </div>
            </div>

            <!-- Hourly Forecast -->
            <div class="bg-white rounded-3xl shadow-2xl p-8 mb-12">
                <h2 class="text-2xl font-bold text-gray-900 mb-6">24-Hour Forecast</h2>
                <div id="hourlyForecast" class="flex overflow-x-auto space-x-4 pb-4">
                    <!-- Hourly cards will be populated here -->
                </div>
            </div>

            <!-- Weather Analytics -->
            <div class="bg-white rounded-3xl shadow-2xl p-8">
                <h2 class="text-2xl font-bold text-gray-900 mb-6">Weather Analytics</h2>
                <canvas id="weatherChart" class="w-full h-64"></canvas>
            </div>
        </div>
    </div>

    <!-- Crops Section -->
    <div id="crops" class="section hidden bg-gradient-to-br from-green-50 via-emerald-50 to-teal-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16">
            <div class="text-center mb-12">
                <h1 class="text-4xl font-bold text-gray-900 mb-4">AI-Powered Crop Intelligence</h1>
                <p class="text-xl text-gray-600">Smart recommendations based on real-time data analysis</p>
            </div>

            <!-- Crop Recommendation Engine -->
            <div class="bg-white rounded-3xl shadow-2xl p-8 mb-12">
                <h2 class="text-2xl font-bold text-gray-900 mb-6">Smart Crop Recommendation Engine</h2>
                <form id="cropForm" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-3">Soil Type</label>
                        <select class="w-full p-4 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:outline-none transition-colors">
                            <option>Laterite Soil</option>
                            <option>Alluvial Soil</option>
                            <option>Red Soil</option>
                            <option>Black Cotton Soil</option>
                            <option>Sandy Soil</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-3">Season</label>
                        <select class="w-full p-4 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:outline-none transition-colors">
                            <option>Kharif (Monsoon)</option>
                            <option>Rabi (Post-Monsoon)</option>
                            <option>Zaid (Summer)</option>
                            <option>Perennial</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-3">Farm Area (Acres)</label>
                        <input type="number" class="w-full p-4 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:outline-none transition-colors" placeholder="Enter area" min="0.1" step="0.1">
                    </div>
                    <div class="flex items-end">
                        <button type="submit" class="w-full bg-gradient-to-r from-green-500 to-blue-600 text-white px-6 py-4 rounded-xl hover:from-green-600 hover:to-blue-700 transition-all duration-300 font-semibold">
                            <i class="fas fa-magic mr-2"></i>
                            Get AI Recommendations
                        </button>
                    </div>
                </form>
            </div>

            <!-- Recommended Crops -->
            <div class="mb-12">
                <h2 class="text-2xl font-bold text-gray-900 mb-8">Recommended Crops for Your Region</h2>
                <div id="cropRecommendations" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <!-- Crop cards will be populated here -->
                </div>
            </div>

            <!-- Current Crops Management -->
            <div class="bg-white rounded-3xl shadow-2xl p-8">
                <h2 class="text-2xl font-bold text-gray-900 mb-6">Your Crop Portfolio</h2>
                <div class="overflow-x-auto">
                    <table class="min-w-full">
                        <thead>
                            <tr class="border-b-2 border-gray-100">
                                <th class="text-left py-4 px-6 font-semibold text-gray-700">Crop</th>
                                <th class="text-left py-4 px-6 font-semibold text-gray-700">Area</th>
                                <th class="text-left py-4 px-6 font-semibold text-gray-700">Planted</th>
                                <th class="text-left py-4 px-6 font-semibold text-gray-700">Growth Stage</th>
                                <th class="text-left py-4 px-6 font-semibold text-gray-700">Health Score</th>
                                <th class="text-left py-4 px-6 font-semibold text-gray-700">Expected Harvest</th>
                                <th class="text-left py-4 px-6 font-semibold text-gray-700">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="cropPortfolio">
                            <!-- Crop portfolio will be populated here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Fertilizer Calculation Section -->
    <div id="fertilizer" class="section hidden bg-gradient-to-br from-orange-50 via-amber-50 to-yellow-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16">
            <div class="text-center mb-12">
                <h1 class="text-4xl font-bold text-gray-900 mb-4">AI-Powered Fertilizer Calculator</h1>
                <p class="text-xl text-gray-600">Precision nutrient management for optimal crop growth</p>
            </div>

            <!-- Fertilizer Calculator Form -->
            <div class="bg-white rounded-3xl shadow-2xl p-8 mb-12">
                <h2 class="text-2xl font-bold text-gray-900 mb-6">Smart Fertilizer Calculation Engine</h2>
                <form id="fertilizerForm" class="space-y-8">
                    <!-- Basic Information -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-3">Crop Type</label>
                            <select id="cropType" class="w-full p-4 border-2 border-gray-200 rounded-xl focus:border-orange-500 focus:outline-none transition-colors">
                                <option value="rice">Rice</option>
                                <option value="wheat">Wheat</option>
                                <option value="corn">Corn</option>
                                <option value="cotton">Cotton</option>
                                <option value="sugarcane">Sugarcane</option>
                                <option value="potato">Potato</option>
                                <option value="tomato">Tomato</option>
                                <option value="onion">Onion</option>
                                <option value="banana">Banana</option>
                                <option value="coconut">Coconut</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-3">Farm Area (Acres)</label>
                            <input type="number" id="farmArea" class="w-full p-4 border-2 border-gray-200 rounded-xl focus:border-orange-500 focus:outline-none transition-colors" placeholder="Enter area" min="0.1" step="0.1" value="2">
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-3">Growth Stage</label>
                            <select id="growthStage" class="w-full p-4 border-2 border-gray-200 rounded-xl focus:border-orange-500 focus:outline-none transition-colors">
                                <option value="seedling">Seedling</option>
                                <option value="vegetative">Vegetative</option>
                                <option value="flowering">Flowering</option>
                                <option value="fruiting">Fruiting/Grain Filling</option>
                                <option value="maturity">Maturity</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-3">Soil Type</label>
                            <select id="soilType" class="w-full p-4 border-2 border-gray-200 rounded-xl focus:border-orange-500 focus:outline-none transition-colors">
                                <option value="clay">Clay</option>
                                <option value="loam">Loam</option>
                                <option value="sandy">Sandy</option>
                                <option value="silt">Silt</option>
                                <option value="laterite">Laterite</option>
                                <option value="alluvial">Alluvial</option>
                            </select>
                        </div>
                    </div>

                    <!-- Soil Test Results (Optional) -->
                    <div class="bg-gradient-to-r from-blue-50 to-purple-50 rounded-2xl p-6">
                        <h3 class="text-lg font-bold text-gray-900 mb-4">🧪 Soil Test Results (Optional - for precision calculation)</h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">Available Nitrogen (kg/ha)</label>
                                <input type="number" id="soilN" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:outline-none transition-colors" placeholder="Optional" min="0" step="0.1">
                            </div>
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">Available Phosphorus (kg/ha)</label>
                                <input type="number" id="soilP" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:outline-none transition-colors" placeholder="Optional" min="0" step="0.1">
                            </div>
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">Available Potassium (kg/ha)</label>
                                <input type="number" id="soilK" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:outline-none transition-colors" placeholder="Optional" min="0" step="0.1">
                            </div>
                        </div>
                    </div>

                    <!-- Target Yield -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-3">Target Yield (tons/acre)</label>
                            <input type="number" id="targetYield" class="w-full p-4 border-2 border-gray-200 rounded-xl focus:border-orange-500 focus:outline-none transition-colors" placeholder="Expected yield" min="0.1" step="0.1" value="4">
                        </div>
                        <div class="flex items-end">
                            <button type="submit" class="w-full bg-gradient-to-r from-orange-500 to-red-600 text-white px-6 py-4 rounded-xl hover:from-orange-600 hover:to-red-700 transition-all duration-300 font-semibold text-lg shadow-lg">
                                <i class="fas fa-calculator mr-2"></i>
                                Calculate AI-Optimized Fertilizer
                            </button>
                        </div>
                    </div>
                </form>
            </div>

            <!-- Fertilizer Recommendations -->
            <div id="fertilizerResults" class="hidden">
                <div class="bg-white rounded-3xl shadow-2xl p-8 mb-12">
                    <h2 class="text-2xl font-bold text-gray-900 mb-6">🤖 AI Fertilizer Recommendations</h2>
                    <div id="fertilizerCalculations" class="space-y-6">
                        <!-- Results will be populated here -->
                    </div>
                </div>

                <!-- Application Schedule -->
                <div class="bg-white rounded-3xl shadow-2xl p-8 mb-12">
                    <h2 class="text-2xl font-bold text-gray-900 mb-6">📅 Smart Application Schedule</h2>
                    <div id="applicationSchedule" class="space-y-4">
                        <!-- Schedule will be populated here -->
                    </div>
                </div>

                <!-- Cost Analysis -->
                <div class="bg-white rounded-3xl shadow-2xl p-8">
                    <h2 class="text-2xl font-bold text-gray-900 mb-6">💰 Cost Analysis & Savings</h2>
                    <div id="costAnalysis" class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <!-- Cost analysis will be populated here -->
                    </div>
                </div>
            </div>

            <!-- Fertilizer Knowledge Base -->
            <div class="bg-white rounded-3xl shadow-2xl p-8">
                <h2 class="text-2xl font-bold text-gray-900 mb-6">📚 Fertilizer Knowledge Base</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8" id="fertilizerKnowledge">
                    <!-- Knowledge cards will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Disease Detection Section -->
    <div id="disease" class="section hidden bg-gradient-to-br from-purple-50 via-pink-50 to-rose-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16">
            <div class="text-center mb-12">
                <h1 class="text-4xl font-bold text-gray-900 mb-4">AI Disease Detection System</h1>
                <p class="text-xl text-gray-600">Advanced computer vision for instant plant health diagnosis</p>
            </div>

            <!-- AI Scanner -->
            <div class="bg-white rounded-3xl shadow-2xl p-8 mb-12">
                <h2 class="text-2xl font-bold text-gray-900 mb-6">Plant Health Scanner</h2>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
                    <div>
                        <div id="uploadArea" class="border-3 border-dashed border-gray-300 rounded-3xl p-12 text-center hover:border-blue-500 transition-colors cursor-pointer">
                            <div class="text-6xl mb-6">
                                <i class="fas fa-camera text-gray-400"></i>
                            </div>
                            <h3 class="text-xl font-semibold text-gray-700 mb-2">Upload Plant Image</h3>
                            <p class="text-gray-500 mb-6">Drag & drop or click to select image</p>
                            <input type="file" id="diseaseImage" accept="image/*" class="hidden">
                            <button onclick="document.getElementById('diseaseImage').click()" class="bg-blue-600 text-white px-8 py-3 rounded-xl hover:bg-blue-700 transition-colors font-semibold">
                                <i class="fas fa-upload mr-2"></i>
                                Choose Image
                            </button>
                        </div>
                        <div id="imagePreview" class="mt-6 hidden">
                            <img id="previewImg" class="w-full rounded-2xl shadow-lg">
                            <button onclick="analyzeDisease()" class="w-full mt-4 bg-green-600 text-white px-8 py-4 rounded-xl hover:bg-green-700 transition-colors font-semibold">
                                <i class="fas fa-microscope mr-2"></i>
                                Analyze with AI
                            </button>
                        </div>
                    </div>
                    
                    <div id="analysisResults" class="hidden">
                        <div class="bg-gradient-to-br from-green-50 to-blue-50 rounded-2xl p-8">
                            <h3 class="text-xl font-bold text-gray-900 mb-4">Analysis Results</h3>
                            <div id="diseaseInfo">
                                <!-- Results will be populated here -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Disease Database -->
            <div class="bg-white rounded-3xl shadow-2xl p-8">
                <h2 class="text-2xl font-bold text-gray-900 mb-6">Common Plant Diseases</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8" id="diseaseDatabase">
                    <!-- Disease cards will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- AI Assistant Section -->
    <div id="assistant" class="section hidden bg-gradient-to-br from-violet-50 via-purple-50 to-indigo-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16">
            <div class="text-center mb-12">
                <h1 class="text-4xl font-bold text-gray-900 mb-4">🤖 AI Farm Assistant</h1>
                <p class="text-xl text-gray-600">Ask anything about farming - Voice or Text powered by AI</p>
            </div>

            <!-- AI Chat Interface -->
            <div class="bg-white rounded-3xl shadow-2xl p-8 mb-12">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-2xl font-bold text-gray-900">Smart Farm Assistant</h2>
                    <div class="flex items-center space-x-2">
                        <div class="w-3 h-3 bg-green-500 rounded-full pulse-glow"></div>
                        <span class="text-sm font-semibold text-green-700">AI Online</span>
                    </div>
                </div>

                <!-- Chat Messages -->
                <div id="chatMessages" class="h-96 overflow-y-auto bg-gray-50 rounded-2xl p-6 mb-6 space-y-4">
                    <div class="flex items-start space-x-3">
                        <div class="w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center">
                            <i class="fas fa-robot text-white"></i>
                        </div>
                        <div class="bg-white rounded-2xl p-4 shadow-sm max-w-md">
                            <p class="text-gray-800">👋 Hello! I'm your AI Farm Assistant. Ask me anything about:</p>
                            <ul class="mt-2 text-sm text-gray-600 space-y-1">
                                <li>• Crop recommendations</li>
                                <li>• Disease identification</li>
                                <li>• Weather insights</li>
                                <li>• Fertilizer calculations</li>
                                <li>• Market prices</li>
                                <li>• Best farming practices</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Input Section -->
                <div class="space-y-4">
                    <!-- Voice Input -->
                    <div class="flex items-center justify-center space-x-4 p-6 bg-gradient-to-r from-purple-50 to-pink-50 rounded-2xl">
                        <button id="voiceBtn" onclick="toggleVoiceRecording()" class="w-16 h-16 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-full hover:from-purple-600 hover:to-pink-600 transition-all duration-300 flex items-center justify-center shadow-lg hover:shadow-xl transform hover:scale-105">
                            <i id="voiceIcon" class="fas fa-microphone text-2xl"></i>
                        </button>
                        <div class="text-center">
                            <div class="font-bold text-gray-900">Voice Input</div>
                            <div id="voiceStatus" class="text-sm text-gray-600">Click to start speaking</div>
                        </div>
                        <div id="voiceWave" class="hidden flex items-center space-x-1">
                            <div class="w-1 h-8 bg-purple-500 rounded-full animate-pulse"></div>
                            <div class="w-1 h-6 bg-pink-500 rounded-full animate-pulse" style="animation-delay: 0.1s;"></div>
                            <div class="w-1 h-10 bg-purple-500 rounded-full animate-pulse" style="animation-delay: 0.2s;"></div>
                            <div class="w-1 h-4 bg-pink-500 rounded-full animate-pulse" style="animation-delay: 0.3s;"></div>
                            <div class="w-1 h-7 bg-purple-500 rounded-full animate-pulse" style="animation-delay: 0.4s;"></div>
                        </div>
                    </div>

                    <!-- Text Input -->
                    <div class="flex space-x-4">
                        <input type="text" id="chatInput" placeholder="Type your farming question here..." class="flex-1 p-4 border-2 border-gray-200 rounded-2xl focus:border-blue-500 focus:outline-none transition-colors text-lg">
                        <button onclick="sendMessage()" class="bg-gradient-to-r from-blue-500 to-green-500 text-white px-8 py-4 rounded-2xl hover:from-blue-600 hover:to-green-600 transition-all duration-300 font-bold shadow-lg">
                            <i class="fas fa-paper-plane mr-2"></i>
                            Send
                        </button>
                    </div>

                    <!-- Quick Questions -->
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                        <button onclick="askQuickQuestion('What crops should I plant this season?')" class="p-3 bg-blue-50 hover:bg-blue-100 text-blue-800 rounded-xl text-sm font-medium transition-colors">
                            🌱 Crop Suggestions
                        </button>
                        <button onclick="askQuickQuestion('How to identify plant diseases?')" class="p-3 bg-red-50 hover:bg-red-100 text-red-800 rounded-xl text-sm font-medium transition-colors">
                            🔬 Disease Help
                        </button>
                        <button onclick="askQuickQuestion('What fertilizer should I use?')" class="p-3 bg-green-50 hover:bg-green-100 text-green-800 rounded-xl text-sm font-medium transition-colors">
                            🧪 Fertilizer Guide
                        </button>
                        <button onclick="askQuickQuestion('Current weather impact on crops?')" class="p-3 bg-yellow-50 hover:bg-yellow-100 text-yellow-800 rounded-xl text-sm font-medium transition-colors">
                            🌤️ Weather Impact
                        </button>
                    </div>
                </div>
            </div>

            <!-- AI Features Showcase -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div class="bg-white rounded-3xl shadow-xl p-8 text-center card-hover">
                    <div class="w-20 h-20 bg-gradient-to-r from-purple-500 to-pink-500 rounded-3xl flex items-center justify-center mx-auto mb-6">
                        <i class="fas fa-microphone text-3xl text-white"></i>
                    </div>
                    <h3 class="text-xl font-bold text-gray-900 mb-3">Voice Recognition</h3>
                    <p class="text-gray-600 mb-4">Speak naturally in your language and get instant AI responses</p>
                    <div class="text-sm text-purple-600 font-semibold">Supports 10+ Languages</div>
                </div>

                <div class="bg-white rounded-3xl shadow-xl p-8 text-center card-hover">
                    <div class="w-20 h-20 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-3xl flex items-center justify-center mx-auto mb-6">
                        <i class="fas fa-brain text-3xl text-white"></i>
                    </div>
                    <h3 class="text-xl font-bold text-gray-900 mb-3">Smart AI Responses</h3>
                    <p class="text-gray-600 mb-4">Advanced AI trained on agricultural data for accurate answers</p>
                    <div class="text-sm text-blue-600 font-semibold">95% Accuracy Rate</div>
                </div>

                <div class="bg-white rounded-3xl shadow-xl p-8 text-center card-hover">
                    <div class="w-20 h-20 bg-gradient-to-r from-green-500 to-emerald-500 rounded-3xl flex items-center justify-center mx-auto mb-6">
                        <i class="fas fa-comments text-3xl text-white"></i>
                    </div>
                    <h3 class="text-xl font-bold text-gray-900 mb-3">Contextual Help</h3>
                    <p class="text-gray-600 mb-4">AI remembers your farm details for personalized advice</p>
                    <div class="text-sm text-green-600 font-semibold">Personalized Insights</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Analytics Section -->
    <div id="analytics" class="section hidden bg-gradient-to-br from-slate-50 via-gray-50 to-zinc-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16">
            <div class="text-center mb-12">
                <h1 class="text-4xl font-bold text-gray-900 mb-4">Advanced Farm Analytics</h1>
                <p class="text-xl text-gray-600">Data-driven insights for optimal farm management</p>
            </div>

            <!-- KPI Dashboard -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-12">
                <div class="bg-white rounded-3xl shadow-xl p-8 card-hover">
                    <div class="flex items-center justify-between mb-4">
                        <div class="w-12 h-12 bg-green-100 rounded-2xl flex items-center justify-center">
                            <i class="fas fa-rupee-sign text-green-600 text-xl"></i>
                        </div>
                        <div class="text-right">
                            <div class="text-sm text-gray-500">Total Revenue</div>
                            <div class="text-2xl font-bold text-gray-900">₹3,45,000</div>
                            <div class="text-sm text-green-600">+15% ↗</div>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-3xl shadow-xl p-8 card-hover">
                    <div class="flex items-center justify-between mb-4">
                        <div class="w-12 h-12 bg-blue-100 rounded-2xl flex items-center justify-center">
                            <i class="fas fa-chart-line text-blue-600 text-xl"></i>
                        </div>
                        <div class="text-right">
                            <div class="text-sm text-gray-500">Yield Efficiency</div>
                            <div class="text-2xl font-bold text-gray-900">92%</div>
                            <div class="text-sm text-blue-600">+8% ↗</div>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-3xl shadow-xl p-8 card-hover">
                    <div class="flex items-center justify-between mb-4">
                        <div class="w-12 h-12 bg-purple-100 rounded-2xl flex items-center justify-center">
                            <i class="fas fa-leaf text-purple-600 text-xl"></i>
                        </div>
                        <div class="text-right">
                            <div class="text-sm text-gray-500">Crop Health</div>
                            <div class="text-2xl font-bold text-gray-900">96%</div>
                            <div class="text-sm text-purple-600">+3% ↗</div>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-3xl shadow-xl p-8 card-hover">
                    <div class="flex items-center justify-between mb-4">
                        <div class="w-12 h-12 bg-cyan-100 rounded-2xl flex items-center justify-center">
                            <i class="fas fa-tint text-cyan-600 text-xl"></i>
                        </div>
                        <div class="text-right">
                            <div class="text-sm text-gray-500">Water Saved</div>
                            <div class="text-2xl font-bold text-gray-900">22%</div>
                            <div class="text-sm text-cyan-600">Optimized ↗</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Charts Section -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-12">
                <div class="bg-white rounded-3xl shadow-2xl p-8">
                    <h2 class="text-xl font-bold text-gray-900 mb-6">Yield Trends</h2>
                    <canvas id="yieldChart" class="w-full h-64"></canvas>
                </div>
                <div class="bg-white rounded-3xl shadow-2xl p-8">
                    <h2 class="text-xl font-bold text-gray-900 mb-6">Revenue Distribution</h2>
                    <canvas id="revenueChart" class="w-full h-64"></canvas>
                </div>
            </div>

            <!-- AI Insights -->
            <div class="bg-white rounded-3xl shadow-2xl p-8">
                <h2 class="text-2xl font-bold text-gray-900 mb-6">AI-Powered Insights & Recommendations</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div class="space-y-6">
                        <div class="p-6 bg-gradient-to-r from-green-50 to-green-100 rounded-2xl border-l-4 border-green-500">
                            <div class="flex items-center mb-3">
                                <i class="fas fa-lightbulb text-green-600 text-xl mr-3"></i>
                                <h3 class="font-bold text-green-800">Optimization Opportunity</h3>
                            </div>
                            <p class="text-green-700">Implement intercropping with legumes to increase nitrogen fixation and boost yield by 18%</p>
                        </div>
                        
                        <div class="p-6 bg-gradient-to-r from-blue-50 to-blue-100 rounded-2xl border-l-4 border-blue-500">
                            <div class="flex items-center mb-3">
                                <i class="fas fa-chart-bar text-blue-600 text-xl mr-3"></i>
                                <h3 class="font-bold text-blue-800">Market Intelligence</h3>
                            </div>
                            <p class="text-blue-700">Cardamom prices projected to rise 22% next quarter. Consider expanding cultivation area.</p>
                        </div>
                    </div>
                    
                    <div class="space-y-6">
                        <div class="p-6 bg-gradient-to-r from-yellow-50 to-yellow-100 rounded-2xl border-l-4 border-yellow-500">
                            <div class="flex items-center mb-3">
                                <i class="fas fa-exclamation-triangle text-yellow-600 text-xl mr-3"></i>
                                <h3 class="font-bold text-yellow-800">Risk Alert</h3>
                            </div>
                            <p class="text-yellow-700">Weather patterns indicate potential water stress. Activate drip irrigation system.</p>
                        </div>
                        
                        <div class="p-6 bg-gradient-to-r from-purple-50 to-purple-100 rounded-2xl border-l-4 border-purple-500">
                            <div class="flex items-center mb-3">
                                <i class="fas fa-robot text-purple-600 text-xl mr-3"></i>
                                <h3 class="font-bold text-purple-800">AI Recommendation</h3>
                            </div>
                            <p class="text-purple-700">Optimal fertilizer application window: Next 3-5 days based on weather and soil conditions.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Contributors Section -->
    <div id="contributors" class="section hidden bg-gradient-to-br from-indigo-50 via-blue-50 to-cyan-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16">
            <div class="text-center mb-16">
                <h1 class="text-5xl font-bold text-gray-900 mb-6">🚀 Meet Our Team</h1>
                <p class="text-xl text-gray-600 max-w-3xl mx-auto">The brilliant minds behind FarmAI Pro - passionate developers and agricultural enthusiasts working together to revolutionize farming with AI technology.</p>
                <div class="mt-8 inline-flex items-center px-6 py-3 bg-gradient-to-r from-green-100 to-blue-100 rounded-full">
                    <i class="fas fa-users text-green-600 mr-2"></i>
                    <span class="font-semibold text-gray-800">6 Team Members • Full Stack Development • AI/ML Specialists</span>
                </div>
            </div>

            <!-- Team Grid -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-16">
                <!-- Team Member 1 - Yogeshwaran B -->
                <div class="bg-white rounded-3xl shadow-2xl p-8 card-hover text-center relative overflow-hidden group">
                    <div class="absolute inset-0 bg-gradient-to-br from-blue-500 to-purple-600 opacity-0 group-hover:opacity-10 transition-opacity duration-500"></div>
                    <div class="relative z-10">
                        <div class="w-32 h-32 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full mx-auto mb-6 flex items-center justify-center shadow-2xl">
                            <span class="text-4xl font-bold text-white">YW</span>
                        </div>
                        <h3 class="text-2xl font-bold text-gray-900 mb-2">Yogeshwaran B</h3>
                        <div class="text-blue-600 font-semibold mb-4">🎯 Team Lead & Full Stack Developer</div>
                        <p class="text-gray-600 mb-6 leading-relaxed">Project architect and lead developer specializing in AI integration, system design, and team coordination. Passionate about agricultural technology innovation.</p>
                        
                        <!-- Skills -->
                        <div class="flex flex-wrap justify-center gap-2 mb-6">
                            <span class="px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-xs font-semibold">React</span>
                            <span class="px-3 py-1 bg-green-100 text-green-800 rounded-full text-xs font-semibold">Node.js</span>
                            <span class="px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-xs font-semibold">AI/ML</span>
                            <span class="px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs font-semibold">Leadership</span>
                        </div>
                        
                        <!-- Social Links -->
                        <div class="flex justify-center space-x-4">
                            <a href="#" target="_blank" class="w-12 h-12 bg-blue-600 hover:bg-blue-700 text-white rounded-full flex items-center justify-center transition-colors shadow-lg">
                                <i class="fab fa-linkedin-in"></i>
                            </a>
                            <a href="#" target="_blank" class="w-12 h-12 bg-gray-800 hover:bg-gray-900 text-white rounded-full flex items-center justify-center transition-colors shadow-lg">
                                <i class="fab fa-github"></i>
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Team Member 2 - Abdul Odood -->
                <div class="bg-white rounded-3xl shadow-2xl p-8 card-hover text-center relative overflow-hidden group">
                    <div class="absolute inset-0 bg-gradient-to-br from-green-500 to-emerald-600 opacity-0 group-hover:opacity-10 transition-opacity duration-500"></div>
                    <div class="relative z-10">
                        <div class="w-32 h-32 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full mx-auto mb-6 flex items-center justify-center shadow-2xl">
                            <span class="text-4xl font-bold text-white">AO</span>
                        </div>
                        <h3 class="text-2xl font-bold text-gray-900 mb-2">Abdul Odood</h3>
                        <div class="text-green-600 font-semibold mb-4">🤖 AI/ML Specialist</div>
                        <p class="text-gray-600 mb-6 leading-relaxed">Machine learning expert focusing on crop prediction algorithms, disease detection models, and intelligent farming solutions using advanced AI techniques.</p>
                        
                        <!-- Skills -->
                        <div class="flex flex-wrap justify-center gap-2 mb-6">
                            <span class="px-3 py-1 bg-green-100 text-green-800 rounded-full text-xs font-semibold">Python</span>
                            <span class="px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-xs font-semibold">TensorFlow</span>
                            <span class="px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-xs font-semibold">Computer Vision</span>
                            <span class="px-3 py-1 bg-orange-100 text-orange-800 rounded-full text-xs font-semibold">Data Science</span>
                        </div>
                        
                        <!-- Social Links -->
                        <div class="flex justify-center space-x-4">
                            <a href="#" target="_blank" class="w-12 h-12 bg-blue-600 hover:bg-blue-700 text-white rounded-full flex items-center justify-center transition-colors shadow-lg">
                                <i class="fab fa-linkedin-in"></i>
                            </a>
                            <a href="#" target="_blank" class="w-12 h-12 bg-gray-800 hover:bg-gray-900 text-white rounded-full flex items-center justify-center transition-colors shadow-lg">
                                <i class="fab fa-github"></i>
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Team Member 3 - Kishore P -->
                <div class="bg-white rounded-3xl shadow-2xl p-8 card-hover text-center relative overflow-hidden group">
                    <div class="absolute inset-0 bg-gradient-to-br from-purple-500 to-pink-600 opacity-0 group-hover:opacity-10 transition-opacity duration-500"></div>
                    <div class="relative z-10">
                        <div class="w-32 h-32 bg-gradient-to-br from-purple-500 to-pink-600 rounded-full mx-auto mb-6 flex items-center justify-center shadow-2xl">
                            <span class="text-4xl font-bold text-white">KP</span>
                        </div>
                        <h3 class="text-2xl font-bold text-gray-900 mb-2">Kishore P</h3>
                        <div class="text-purple-600 font-semibold mb-4">🎨 Frontend Developer & UI/UX Designer</div>
                        <p class="text-gray-600 mb-6 leading-relaxed">Creative frontend developer crafting beautiful, intuitive user interfaces and seamless user experiences for agricultural applications with modern design principles.</p>
                        
                        <!-- Skills -->
                        <div class="flex flex-wrap justify-center gap-2 mb-6">
                            <span class="px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-xs font-semibold">React</span>
                            <span class="px-3 py-1 bg-pink-100 text-pink-800 rounded-full text-xs font-semibold">UI/UX</span>
                            <span class="px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-xs font-semibold">CSS/Tailwind</span>
                            <span class="px-3 py-1 bg-green-100 text-green-800 rounded-full text-xs font-semibold">JavaScript</span>
                        </div>
                        
                        <!-- Social Links -->
                        <div class="flex justify-center space-x-4">
                            <a href="#" target="_blank" class="w-12 h-12 bg-blue-600 hover:bg-blue-700 text-white rounded-full flex items-center justify-center transition-colors shadow-lg">
                                <i class="fab fa-linkedin-in"></i>
                            </a>
                            <a href="#" target="_blank" class="w-12 h-12 bg-gray-800 hover:bg-gray-900 text-white rounded-full flex items-center justify-center transition-colors shadow-lg">
                                <i class="fab fa-github"></i>
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Team Member 4 - Tamilselvan -->
                <div class="bg-white rounded-3xl shadow-2xl p-8 card-hover text-center relative overflow-hidden group">
                    <div class="absolute inset-0 bg-gradient-to-br from-orange-500 to-red-600 opacity-0 group-hover:opacity-10 transition-opacity duration-500"></div>
                    <div class="relative z-10">
                        <div class="w-32 h-32 bg-gradient-to-br from-orange-500 to-red-600 rounded-full mx-auto mb-6 flex items-center justify-center shadow-2xl">
                            <span class="text-4xl font-bold text-white">TS</span>
                        </div>
                        <h3 class="text-2xl font-bold text-gray-900 mb-2">Tamilselvan</h3>
                        <div class="text-orange-600 font-semibold mb-4">⚙️ Backend Developer & Database Architect</div>
                        <p class="text-gray-600 mb-6 leading-relaxed">Backend specialist building robust server architectures, database systems, and API integrations to power the agricultural intelligence platform with scalable solutions.</p>
                        
                        <!-- Skills -->
                        <div class="flex flex-wrap justify-center gap-2 mb-6">
                            <span class="px-3 py-1 bg-orange-100 text-orange-800 rounded-full text-xs font-semibold">Node.js</span>
                            <span class="px-3 py-1 bg-red-100 text-red-800 rounded-full text-xs font-semibold">MongoDB</span>
                            <span class="px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-xs font-semibold">Express.js</span>
                            <span class="px-3 py-1 bg-green-100 text-green-800 rounded-full text-xs font-semibold">APIs</span>
                        </div>
                        
                        <!-- Social Links -->
                        <div class="flex justify-center space-x-4">
                            <a href="#" target="_blank" class="w-12 h-12 bg-blue-600 hover:bg-blue-700 text-white rounded-full flex items-center justify-center transition-colors shadow-lg">
                                <i class="fab fa-linkedin-in"></i>
                            </a>
                            <a href="#" target="_blank" class="w-12 h-12 bg-gray-800 hover:bg-gray-900 text-white rounded-full flex items-center justify-center transition-colors shadow-lg">
                                <i class="fab fa-github"></i>
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Team Member 5 - Shyam PS -->
                <div class="bg-white rounded-3xl shadow-2xl p-8 card-hover text-center relative overflow-hidden group">
                    <div class="absolute inset-0 bg-gradient-to-br from-cyan-500 to-blue-600 opacity-0 group-hover:opacity-10 transition-opacity duration-500"></div>
                    <div class="relative z-10">
                        <div class="w-32 h-32 bg-gradient-to-br from-cyan-500 to-blue-600 rounded-full mx-auto mb-6 flex items-center justify-center shadow-2xl">
                            <span class="text-4xl font-bold text-white">SP</span>
                        </div>
                        <h3 class="text-2xl font-bold text-gray-900 mb-2">Shyam PS</h3>
                        <div class="text-cyan-600 font-semibold mb-4">📊 Data Analyst & Research Specialist</div>
                        <p class="text-gray-600 mb-6 leading-relaxed">Data science expert analyzing agricultural patterns, market trends, and farming data to provide actionable insights and improve AI model accuracy for better predictions.</p>
                        
                        <!-- Skills -->
                        <div class="flex flex-wrap justify-center gap-2 mb-6">
                            <span class="px-3 py-1 bg-cyan-100 text-cyan-800 rounded-full text-xs font-semibold">Python</span>
                            <span class="px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-xs font-semibold">Data Analysis</span>
                            <span class="px-3 py-1 bg-green-100 text-green-800 rounded-full text-xs font-semibold">Research</span>
                            <span class="px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-xs font-semibold">Statistics</span>
                        </div>
                        
                        <!-- Social Links -->
                        <div class="flex justify-center space-x-4">
                            <a href="#" target="_blank" class="w-12 h-12 bg-blue-600 hover:bg-blue-700 text-white rounded-full flex items-center justify-center transition-colors shadow-lg">
                                <i class="fab fa-linkedin-in"></i>
                            </a>
                            <a href="#" target="_blank" class="w-12 h-12 bg-gray-800 hover:bg-gray-900 text-white rounded-full flex items-center justify-center transition-colors shadow-lg">
                                <i class="fab fa-github"></i>
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Team Member 6 - Sri Durga -->
                <div class="bg-white rounded-3xl shadow-2xl p-8 card-hover text-center relative overflow-hidden group">
                    <div class="absolute inset-0 bg-gradient-to-br from-pink-500 to-rose-600 opacity-0 group-hover:opacity-10 transition-opacity duration-500"></div>
                    <div class="relative z-10">
                        <div class="w-32 h-32 bg-gradient-to-br from-pink-500 to-rose-600 rounded-full mx-auto mb-6 flex items-center justify-center shadow-2xl">
                            <span class="text-4xl font-bold text-white">SD</span>
                        </div>
                        <h3 class="text-2xl font-bold text-gray-900 mb-2">Sri Durga</h3>
                        <div class="text-pink-600 font-semibold mb-4">🧪 Quality Assurance & Testing Specialist</div>
                        <p class="text-gray-600 mb-6 leading-relaxed">QA engineer ensuring robust, reliable, and user-friendly agricultural solutions through comprehensive testing, quality control, and performance optimization strategies.</p>
                        
                        <!-- Skills -->
                        <div class="flex flex-wrap justify-center gap-2 mb-6">
                            <span class="px-3 py-1 bg-pink-100 text-pink-800 rounded-full text-xs font-semibold">Testing</span>
                            <span class="px-3 py-1 bg-rose-100 text-rose-800 rounded-full text-xs font-semibold">QA</span>
                            <span class="px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-xs font-semibold">Automation</span>
                            <span class="px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-xs font-semibold">Documentation</span>
                        </div>
                        
                        <!-- Social Links -->
                        <div class="flex justify-center space-x-4">
                            <a href="#" target="_blank" class="w-12 h-12 bg-blue-600 hover:bg-blue-700 text-white rounded-full flex items-center justify-center transition-colors shadow-lg">
                                <i class="fab fa-linkedin-in"></i>
                            </a>
                            <a href="#" target="_blank" class="w-12 h-12 bg-gray-800 hover:bg-gray-900 text-white rounded-full flex items-center justify-center transition-colors shadow-lg">
                                <i class="fab fa-github"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Team Stats -->
            <div class="bg-gradient-to-r from-blue-50 via-purple-50 to-pink-50 rounded-3xl p-12 mb-16">
                <h2 class="text-3xl font-bold text-center text-gray-900 mb-8">🏆 Team Achievements</h2>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-8">
                    <div class="text-center">
                        <div class="text-4xl font-black text-blue-600 mb-2">6</div>
                        <div class="text-sm font-semibold text-gray-700">Team Members</div>
                    </div>
                    <div class="text-center">
                        <div class="text-4xl font-black text-green-600 mb-2">15+</div>
                        <div class="text-sm font-semibold text-gray-700">Technologies Used</div>
                    </div>
                    <div class="text-center">
                        <div class="text-4xl font-black text-purple-600 mb-2">1000+</div>
                        <div class="text-sm font-semibold text-gray-700">Hours Coded</div>
                    </div>
                    <div class="text-center">
                        <div class="text-4xl font-black text-orange-600 mb-2">100%</div>
                        <div class="text-sm font-semibold text-gray-700">Passion Driven</div>
                    </div>
                </div>
            </div>

            <!-- Project Info -->
            <div class="bg-white rounded-3xl shadow-2xl p-12 text-center">
                <h2 class="text-3xl font-bold text-gray-900 mb-6">🌱 About FarmAI Pro</h2>
                <p class="text-xl text-gray-600 mb-8 max-w-4xl mx-auto leading-relaxed">
                    FarmAI Pro is our innovative solution to revolutionize agriculture through artificial intelligence. 
                    We combine cutting-edge technology with deep agricultural knowledge to help farmers make smarter decisions, 
                    increase yields, and build sustainable farming practices for the future.
                </p>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-8">
                    <div class="bg-gradient-to-r from-green-50 to-emerald-50 rounded-2xl p-6">
                        <div class="text-3xl mb-3">🎯</div>
                        <h3 class="font-bold text-gray-900 mb-2">Our Mission</h3>
                        <p class="text-sm text-gray-600">Empowering farmers with AI-driven insights for sustainable and profitable agriculture</p>
                    </div>
                    <div class="bg-gradient-to-r from-blue-50 to-cyan-50 rounded-2xl p-6">
                        <div class="text-3xl mb-3">🔬</div>
                        <h3 class="font-bold text-gray-900 mb-2">Our Technology</h3>
                        <p class="text-sm text-gray-600">Advanced machine learning, computer vision, and data analytics for smart farming</p>
                    </div>
                    <div class="bg-gradient-to-r from-purple-50 to-pink-50 rounded-2xl p-6">
                        <div class="text-3xl mb-3">🌍</div>
                        <h3 class="font-bold text-gray-900 mb-2">Our Vision</h3>
                        <p class="text-sm text-gray-600">Creating a world where technology and agriculture work together for global food security</p>
                    </div>
                </div>

                <div class="flex flex-col sm:flex-row gap-4 justify-center">
                    <button onclick="showSection('dashboard')" class="bg-gradient-to-r from-green-500 to-blue-600 text-white px-8 py-4 rounded-2xl hover:from-green-600 hover:to-blue-700 transition-all duration-300 font-bold shadow-lg">
                        <i class="fas fa-home mr-2"></i>
                        Back to Dashboard
                    </button>
                    <button onclick="showSection('assistant')" class="bg-gradient-to-r from-purple-500 to-pink-500 text-white px-8 py-4 rounded-2xl hover:from-purple-600 hover:to-pink-600 transition-all duration-300 font-bold shadow-lg">
                        <i class="fas fa-robot mr-2"></i>
                        Try AI Assistant
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Location Selector Modal -->
    <div id="locationModal" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 hidden" style="z-index: 9999;">
        <div class="bg-white rounded-3xl p-8 max-w-6xl w-full max-h-[90vh] overflow-y-auto shadow-2xl border-4 border-blue-200">
            <div class="flex justify-between items-center mb-8">
                <div>
                    <h2 class="text-3xl font-bold text-gray-900 mb-2">🗺️ Select Your Location</h2>
                    <p class="text-gray-600">Choose your state and district for personalized farming insights</p>
                </div>
                <button onclick="closeLocationModal()" class="text-gray-500 hover:text-gray-700 text-3xl font-bold">×</button>
            </div>
            
            <!-- Location Grid -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <!-- States List -->
                <div>
                    <h3 class="text-xl font-bold text-gray-900 mb-6 flex items-center">
                        <i class="fas fa-map text-blue-600 mr-3"></i>
                        Select State
                    </h3>
                    <div class="space-y-3" id="statesList">
                        <!-- States will be populated here -->
                    </div>
                </div>
                
                <!-- Districts List -->
                <div>
                    <h3 class="text-xl font-bold text-gray-900 mb-6 flex items-center">
                        <i class="fas fa-map-pin text-green-600 mr-3"></i>
                        Select District
                        <span id="selectedStateName" class="text-sm text-gray-500 ml-2">(Kerala)</span>
                    </h3>
                    <div class="space-y-3" id="districtsList">
                        <!-- Districts will be populated here -->
                    </div>
                </div>
            </div>
            
            <!-- Location Details Panel -->
            <div id="locationDetails" class="mt-8 bg-gradient-to-r from-blue-50 to-green-50 rounded-2xl p-6 hidden">
                <h3 class="text-xl font-bold text-gray-900 mb-4">📍 Location Details</h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="bg-white rounded-xl p-4">
                        <h4 class="font-semibold text-gray-700 mb-2">🌍 Geographic Info</h4>
                        <div class="space-y-1 text-sm text-gray-600">
                            <div>Latitude: <span id="selectedLat">11.6854</span></div>
                            <div>Longitude: <span id="selectedLon">76.1320</span></div>
                            <div>Elevation: <span id="selectedElevation">700-2100m</span></div>
                        </div>
                    </div>
                    <div class="bg-white rounded-xl p-4">
                        <h4 class="font-semibold text-gray-700 mb-2">🌡️ Climate Info</h4>
                        <div class="space-y-1 text-sm text-gray-600">
                            <div>Climate: <span id="selectedClimate">Tropical</span></div>
                            <div>Rainfall: <span id="selectedRainfall">2000-4000mm</span></div>
                            <div>Temperature: <span id="selectedTemp">15-35°C</span></div>
                        </div>
                    </div>
                    <div class="bg-white rounded-xl p-4">
                        <h4 class="font-semibold text-gray-700 mb-2">🌾 Agriculture Info</h4>
                        <div class="space-y-1 text-sm text-gray-600">
                            <div>Main Crops: <span id="selectedCrops">Rice, Spices</span></div>
                            <div>Soil Type: <span id="selectedSoil">Laterite</span></div>
                            <div>Season: <span id="selectedSeason">Year-round</span></div>
                        </div>
                    </div>
                </div>
                
                <!-- Confirm Selection Button -->
                <div class="mt-6 text-center">
                    <button onclick="confirmLocationSelection()" class="bg-gradient-to-r from-blue-600 to-green-600 text-white px-8 py-4 rounded-xl hover:from-blue-700 hover:to-green-700 transition-all duration-300 font-bold text-lg shadow-lg">
                        <i class="fas fa-check mr-2"></i>
                        Confirm Location Selection
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Floating Action Button for Quick Navigation -->
    <div id="fabMenu" class="fixed bottom-6 right-6 z-50">
        <!-- Main FAB Button -->
        <button onclick="toggleFAB()" class="w-16 h-16 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-full shadow-2xl hover:shadow-3xl transition-all duration-300 flex items-center justify-center pulse-glow">
            <i id="fabIcon" class="fas fa-plus text-xl"></i>
        </button>
        
        <!-- FAB Menu Items -->
        <div id="fabItems" class="absolute bottom-20 right-0 space-y-3 hidden">
            <button onclick="showSection('weather'); toggleFAB();" class="w-12 h-12 bg-blue-500 text-white rounded-full shadow-lg hover:shadow-xl transition-all duration-300 flex items-center justify-center" title="Weather">
                <i class="fas fa-cloud-sun"></i>
            </button>
            <button onclick="showSection('crops'); toggleFAB();" class="w-12 h-12 bg-green-500 text-white rounded-full shadow-lg hover:shadow-xl transition-all duration-300 flex items-center justify-center" title="Crops">
                <i class="fas fa-leaf"></i>
            </button>
            <button onclick="showSection('disease'); toggleFAB();" class="w-12 h-12 bg-purple-500 text-white rounded-full shadow-lg hover:shadow-xl transition-all duration-300 flex items-center justify-center" title="AI Detection">
                <i class="fas fa-microscope"></i>
            </button>
            <button onclick="showSection('fertilizer'); toggleFAB();" class="w-12 h-12 bg-orange-500 text-white rounded-full shadow-lg hover:shadow-xl transition-all duration-300 flex items-center justify-center" title="Fertilizer AI">
                <i class="fas fa-flask"></i>
            </button>
            <button onclick="showSection('analytics'); toggleFAB();" class="w-12 h-12 bg-indigo-500 text-white rounded-full shadow-lg hover:shadow-xl transition-all duration-300 flex items-center justify-center" title="Analytics">
                <i class="fas fa-chart-line"></i>
            </button>
            <button onclick="goBack(); toggleFAB();" class="w-12 h-12 bg-gray-500 text-white rounded-full shadow-lg hover:shadow-xl transition-all duration-300 flex items-center justify-center" title="Go Back">
                <i class="fas fa-arrow-left"></i>
            </button>
        </div>
    </div>

    <script>
        // Global variables
        let currentLanguage = 'en';
        let weatherChart, yieldChart, revenueChart;
        let weatherData = {};
        let navigationHistory = ['dashboard']; // Track navigation history
        let currentSection = 'dashboard';
        
        // Voice and Chat variables
        let isRecording = false;
        let recognition = null;
        let chatHistory = [];

        // API Configuration - Using OpenWeatherMap API
        const WEATHER_API_KEY = 'b8c4f7b4c8c4f7b4c8c4f7b4c8c4f7b8'; // Updated API key
        const WEATHER_BASE_URL = 'https://api.openweathermap.org/data/2.5';

        // Enhanced state and district data with detailed agricultural information
        const stateDistricts = {
            kerala: {
                name: "Kerala",
                description: "God's Own Country - Known for spices, coconut, and rubber",
                climate: "Tropical monsoon",
                mainCrops: "Rice, Coconut, Spices, Rubber, Tea",
                districts: [
                    { 
                        value: "wayanad", 
                        name: "Wayanad", 
                        lat: 11.6854, 
                        lon: 76.1320,
                        elevation: "700-2100m",
                        climate: "Tropical highland",
                        rainfall: "2000-4000mm",
                        temperature: "15-35°C",
                        mainCrops: "Coffee, Pepper, Cardamom, Vanilla",
                        soilType: "Laterite, Forest loam",
                        season: "Year-round cultivation",
                        speciality: "Spice capital of India"
                    },
                    { 
                        value: "kottayam", 
                        name: "Kottayam", 
                        lat: 9.5916, 
                        lon: 76.5222,
                        elevation: "0-100m",
                        climate: "Tropical",
                        rainfall: "2500-3000mm",
                        temperature: "23-32°C",
                        mainCrops: "Rice, Rubber, Coconut",
                        soilType: "Alluvial, Laterite",
                        season: "Kharif & Rabi",
                        speciality: "Rubber production hub"
                    },
                    { 
                        value: "thrissur", 
                        name: "Thrissur", 
                        lat: 10.5276, 
                        lon: 76.2144,
                        elevation: "0-300m",
                        climate: "Tropical",
                        rainfall: "2000-3000mm",
                        temperature: "22-34°C",
                        mainCrops: "Rice, Coconut, Vegetables",
                        soilType: "Laterite, Alluvial",
                        season: "Year-round",
                        speciality: "Cultural capital with diverse agriculture"
                    },
                    { 
                        value: "kozhikode", 
                        name: "Kozhikode", 
                        lat: 11.2588, 
                        lon: 75.7804,
                        elevation: "0-500m",
                        climate: "Tropical coastal",
                        rainfall: "2500-3500mm",
                        temperature: "24-33°C",
                        mainCrops: "Coconut, Pepper, Ginger",
                        soilType: "Coastal alluvium, Laterite",
                        season: "Monsoon dependent",
                        speciality: "Spice trade center"
                    }
                ]
            },
            tamilnadu: {
                name: "Tamil Nadu",
                description: "Rice bowl of South India with diverse agro-climatic zones",
                climate: "Tropical to semi-arid",
                mainCrops: "Rice, Sugarcane, Cotton, Millets",
                districts: [
                    { 
                        value: "chennai", 
                        name: "Chennai", 
                        lat: 13.0827, 
                        lon: 80.2707,
                        elevation: "0-60m",
                        climate: "Tropical wet and dry",
                        rainfall: "1200-1400mm",
                        temperature: "24-37°C",
                        mainCrops: "Rice, Vegetables, Flowers",
                        soilType: "Sandy, Alluvial",
                        season: "Northeast monsoon",
                        speciality: "Urban agriculture and floriculture"
                    },
                    { 
                        value: "coimbatore", 
                        name: "Coimbatore", 
                        lat: 11.0168, 
                        lon: 76.9558,
                        elevation: "400-500m",
                        climate: "Semi-arid",
                        rainfall: "600-700mm",
                        temperature: "18-35°C",
                        mainCrops: "Cotton, Sugarcane, Turmeric",
                        soilType: "Black cotton soil",
                        season: "Southwest & Northeast monsoon",
                        speciality: "Textile and cotton hub"
                    },
                    { 
                        value: "madurai", 
                        name: "Madurai", 
                        lat: 9.9252, 
                        lon: 78.1198,
                        elevation: "100-200m",
                        climate: "Semi-arid",
                        rainfall: "800-900mm",
                        temperature: "20-38°C",
                        mainCrops: "Rice, Cotton, Pulses",
                        soilType: "Red soil, Black soil",
                        season: "Northeast monsoon",
                        speciality: "Temple city with traditional farming"
                    },
                    { 
                        value: "salem", 
                        name: "Salem", 
                        lat: 11.6643, 
                        lon: 78.1460,
                        elevation: "200-400m",
                        climate: "Semi-arid",
                        rainfall: "800-1000mm",
                        temperature: "19-37°C",
                        mainCrops: "Mango, Tapioca, Millets",
                        soilType: "Red soil, Black soil",
                        season: "Southwest & Northeast monsoon",
                        speciality: "Mango capital of Tamil Nadu"
                    }
                ]
            },
            maharashtra: {
                name: "Maharashtra",
                description: "Leading agricultural state with diverse crops and progressive farming",
                climate: "Tropical to semi-arid",
                mainCrops: "Cotton, Sugarcane, Soybean, Wheat",
                districts: [
                    { 
                        value: "mumbai", 
                        name: "Mumbai", 
                        lat: 19.0760, 
                        lon: 72.8777,
                        elevation: "0-450m",
                        climate: "Tropical wet",
                        rainfall: "2000-2500mm",
                        temperature: "20-35°C",
                        mainCrops: "Rice, Vegetables, Fruits",
                        soilType: "Laterite, Alluvial",
                        season: "Southwest monsoon",
                        speciality: "Urban farming and high-value crops"
                    },
                    { 
                        value: "pune", 
                        name: "Pune", 
                        lat: 18.5204, 
                        lon: 73.8567,
                        elevation: "500-800m",
                        climate: "Semi-arid",
                        rainfall: "600-800mm",
                        temperature: "15-35°C",
                        mainCrops: "Sugarcane, Grapes, Vegetables",
                        soilType: "Black soil, Red soil",
                        season: "Southwest monsoon",
                        speciality: "Wine country and IT agriculture"
                    },
                    { 
                        value: "nashik", 
                        name: "Nashik", 
                        lat: 19.9975, 
                        lon: 73.7898,
                        elevation: "500-1000m",
                        climate: "Semi-arid",
                        rainfall: "600-1200mm",
                        temperature: "12-40°C",
                        mainCrops: "Grapes, Onion, Pomegranate",
                        soilType: "Black soil",
                        season: "Southwest monsoon",
                        speciality: "Wine capital and onion hub"
                    },
                    { 
                        value: "nagpur", 
                        name: "Nagpur", 
                        lat: 21.1458, 
                        lon: 79.0882,
                        elevation: "300-350m",
                        climate: "Tropical wet and dry",
                        rainfall: "1200-1300mm",
                        temperature: "15-45°C",
                        mainCrops: "Orange, Cotton, Soybean",
                        soilType: "Black cotton soil",
                        season: "Southwest monsoon",
                        speciality: "Orange city of India"
                    }
                ]
            },
            gujarat: {
                name: "Gujarat",
                description: "Progressive agricultural state with excellent irrigation and cotton production",
                climate: "Arid to semi-arid",
                mainCrops: "Cotton, Groundnut, Wheat, Cumin",
                districts: [
                    { 
                        value: "ahmedabad", 
                        name: "Ahmedabad", 
                        lat: 23.0225, 
                        lon: 72.5714,
                        elevation: "50-100m",
                        climate: "Semi-arid",
                        rainfall: "800-1200mm",
                        temperature: "15-45°C",
                        mainCrops: "Cotton, Wheat, Tobacco",
                        soilType: "Alluvial, Black soil",
                        season: "Southwest monsoon",
                        speciality: "Commercial capital with modern farming"
                    },
                    { 
                        value: "surat", 
                        name: "Surat", 
                        lat: 21.1702, 
                        lon: 72.8311,
                        elevation: "0-100m",
                        climate: "Tropical wet and dry",
                        rainfall: "1200-1500mm",
                        temperature: "18-40°C",
                        mainCrops: "Sugarcane, Cotton, Mango",
                        soilType: "Alluvial, Black soil",
                        season: "Southwest monsoon",
                        speciality: "Diamond city with rich agriculture"
                    },
                    { 
                        value: "vadodara", 
                        name: "Vadodara", 
                        lat: 22.3072, 
                        lon: 73.1812,
                        elevation: "35-100m",
                        climate: "Semi-arid",
                        rainfall: "900-1000mm",
                        temperature: "15-42°C",
                        mainCrops: "Cotton, Wheat, Bajra",
                        soilType: "Black cotton soil",
                        season: "Southwest monsoon",
                        speciality: "Cultural capital with diverse crops"
                    },
                    { 
                        value: "rajkot", 
                        name: "Rajkot", 
                        lat: 22.3039, 
                        lon: 70.8022,
                        elevation: "100-200m",
                        climate: "Semi-arid",
                        rainfall: "500-700mm",
                        temperature: "12-42°C",
                        mainCrops: "Groundnut, Cotton, Castor",
                        soilType: "Black soil, Alluvial",
                        season: "Southwest monsoon",
                        speciality: "Groundnut and oil seeds hub"
                    }
                ]
            },
            karnataka: {
                name: "Karnataka",
                description: "Coffee state with diverse agro-climatic zones from coast to hills",
                climate: "Tropical to temperate",
                mainCrops: "Coffee, Rice, Ragi, Sugarcane",
                districts: [
                    { 
                        value: "bangalore", 
                        name: "Bangalore", 
                        lat: 12.9716, 
                        lon: 77.5946,
                        elevation: "900-1000m",
                        climate: "Tropical savanna",
                        rainfall: "900-1000mm",
                        temperature: "15-35°C",
                        mainCrops: "Ragi, Vegetables, Flowers",
                        soilType: "Red soil, Laterite",
                        season: "Southwest & Northeast monsoon",
                        speciality: "Silicon Valley with urban farming"
                    },
                    { 
                        value: "mysore", 
                        name: "Mysore", 
                        lat: 12.2958, 
                        lon: 76.6394,
                        elevation: "700-900m",
                        climate: "Tropical",
                        rainfall: "800-1400mm",
                        temperature: "18-35°C",
                        mainCrops: "Sugarcane, Rice, Ragi",
                        soilType: "Red soil, Black soil",
                        season: "Southwest & Northeast monsoon",
                        speciality: "Palace city with traditional crops"
                    },
                    { 
                        value: "hubli", 
                        name: "Hubli", 
                        lat: 15.3647, 
                        lon: 75.1240,
                        elevation: "600-700m",
                        climate: "Semi-arid",
                        rainfall: "500-800mm",
                        temperature: "18-38°C",
                        mainCrops: "Cotton, Chili, Jowar",
                        soilType: "Black cotton soil",
                        season: "Southwest monsoon",
                        speciality: "Commercial hub with cotton farming"
                    },
                    { 
                        value: "mangalore", 
                        name: "Mangalore", 
                        lat: 12.9141, 
                        lon: 74.8560,
                        elevation: "0-100m",
                        climate: "Tropical monsoon",
                        rainfall: "3000-4000mm",
                        temperature: "22-35°C",
                        mainCrops: "Rice, Coconut, Areca nut",
                        soilType: "Laterite, Coastal alluvium",
                        season: "Southwest monsoon",
                        speciality: "Coastal agriculture and spices"
                    }
                ]
            },
            andhra: {
                name: "Andhra Pradesh",
                description: "Rice bowl of India with excellent irrigation and diverse crops",
                climate: "Tropical to semi-arid",
                mainCrops: "Rice, Cotton, Chili, Mango",
                districts: [
                    { 
                        value: "hyderabad", 
                        name: "Hyderabad", 
                        lat: 17.3850, 
                        lon: 78.4867,
                        elevation: "500-650m",
                        climate: "Semi-arid",
                        rainfall: "800-1000mm",
                        temperature: "15-42°C",
                        mainCrops: "Rice, Maize, Cotton",
                        soilType: "Red soil, Black soil",
                        season: "Southwest & Northeast monsoon",
                        speciality: "Cyberabad with modern agriculture"
                    },
                    { 
                        value: "vijayawada", 
                        name: "Vijayawada", 
                        lat: 16.5062, 
                        lon: 80.6480,
                        elevation: "10-100m",
                        climate: "Tropical",
                        rainfall: "1000-1200mm",
                        temperature: "20-42°C",
                        mainCrops: "Rice, Sugarcane, Cotton",
                        soilType: "Alluvial, Black soil",
                        season: "Southwest & Northeast monsoon",
                        speciality: "Krishna delta rice production"
                    },
                    { 
                        value: "visakhapatnam", 
                        name: "Visakhapatnam", 
                        lat: 17.6868, 
                        lon: 83.2185,
                        elevation: "0-500m",
                        climate: "Tropical",
                        rainfall: "1100-1300mm",
                        temperature: "20-40°C",
                        mainCrops: "Rice, Cashew, Mango",
                        soilType: "Red soil, Laterite",
                        season: "Southwest & Northeast monsoon",
                        speciality: "Port city with coastal agriculture"
                    },
                    { 
                        value: "tirupati", 
                        name: "Tirupati", 
                        lat: 13.6288, 
                        lon: 79.4192,
                        elevation: "100-900m",
                        climate: "Tropical",
                        rainfall: "900-1100mm",
                        temperature: "18-40°C",
                        mainCrops: "Mango, Groundnut, Sugarcane",
                        soilType: "Red soil, Black soil",
                        season: "Southwest & Northeast monsoon",
                        speciality: "Temple town with mango orchards"
                    }
                ]
            }
        };

        // Translation data
        const translations = {
            en: {
                dashboard: "Dashboard",
                weather: "Weather",
                crops: "Crops",
                disease: "AI Detection",
                analytics: "Analytics",
                smartAgriculture: "Smart Agriculture",
                poweredByAI: "Powered by AI",
                liveWeather: "Live Weather",
                cropHealth: "Crop Health",
                smartAlerts: "Smart Alerts",
                aiPredictions: "AI Predictions",
                weatherForecast: "Weather Forecast",
                cropRecommendations: "Crop Recommendations",
                diseaseDetection: "Disease Detection",
                getStarted: "Get Started",
                viewDemo: "View Demo"
            },
            ta: {
                dashboard: "டாஷ்போர்டு",
                weather: "வானிலை",
                crops: "பயிர்கள்",
                disease: "AI கண்டறிதல்",
                analytics: "பகுப்பாய்வு",
                smartAgriculture: "ஸ்மார்ட் விவசாயம்",
                poweredByAI: "AI மூலம் இயக்கப்படுகிறது",
                liveWeather: "நேரடி வானிலை",
                cropHealth: "பயிர் ஆரோக்கியம்",
                smartAlerts: "ஸ்மார்ட் எச்சரிக்கைகள்",
                aiPredictions: "AI கணிப்புகள்",
                weatherForecast: "வானிலை முன்னறிவிப்பு",
                cropRecommendations: "பயிர் பரிந்துரைகள்",
                diseaseDetection: "நோய் கண்டறிதல்",
                getStarted: "தொடங்குங்கள்",
                viewDemo: "டெமோ பார்க்கவும்"
            }
        };

        // Global location variables
        let selectedState = 'kerala';
        let selectedDistrict = 'wayanad';

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
        });

        async function initializeApp() {
            initializeLocationSelector();
            setupEventListeners();
            initializeCharts();
            loadCropRecommendations();
            loadDiseaseDatabase();
            loadCropPortfolio();
            loadFertilizerKnowledge();
            generateLiveAlerts();
            initializeVoiceRecognition();
            
            // Load real-time weather data
            await loadWeatherData();
            
            // Update weather every 10 minutes
            setInterval(loadWeatherData, 600000);
            
            // Update alerts every 30 seconds for demo
            setInterval(generateLiveAlerts, 30000);
        }

        // Voice Recognition Functions
        function initializeVoiceRecognition() {
            if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
                const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                recognition = new SpeechRecognition();
                
                recognition.continuous = false;
                recognition.interimResults = false;
                recognition.lang = currentLanguage === 'ta' ? 'ta-IN' : 'en-US';
                
                recognition.onstart = function() {
                    isRecording = true;
                    document.getElementById('voiceIcon').className = 'fas fa-stop text-2xl';
                    document.getElementById('voiceStatus').textContent = 'Listening... Speak now';
                    document.getElementById('voiceWave').classList.remove('hidden');
                };
                
                recognition.onresult = function(event) {
                    const transcript = event.results[0][0].transcript;
                    document.getElementById('chatInput').value = transcript;
                    sendMessage();
                };
                
                recognition.onerror = function(event) {
                    console.error('Speech recognition error:', event.error);
                    resetVoiceButton();
                    showNotification('Voice recognition failed. Please try again.', 'error');
                };
                
                recognition.onend = function() {
                    resetVoiceButton();
                };
            } else {
                console.log('Speech recognition not supported');
                document.getElementById('voiceBtn').disabled = true;
                document.getElementById('voiceStatus').textContent = 'Voice not supported in this browser';
            }
        }

        function toggleVoiceRecording() {
            if (!recognition) {
                showNotification('Voice recognition not available', 'error');
                return;
            }
            
            if (isRecording) {
                recognition.stop();
            } else {
                recognition.start();
            }
        }

        function resetVoiceButton() {
            isRecording = false;
            document.getElementById('voiceIcon').className = 'fas fa-microphone text-2xl';
            document.getElementById('voiceStatus').textContent = 'Click to start speaking';
            document.getElementById('voiceWave').classList.add('hidden');
        }

        // Chat Functions
        function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (!message) return;
            
            // Add user message to chat
            addMessageToChat(message, 'user');
            
            // Clear input
            input.value = '';
            
            // Show typing indicator
            showTypingIndicator();
            
            // Simulate AI response
            setTimeout(() => {
                const response = generateAIResponse(message);
                hideTypingIndicator();
                addMessageToChat(response, 'ai');
                
                // Speak response if voice was used
                if (isRecording) {
                    speakResponse(response);
                }
            }, 1500 + Math.random() * 1000);
        }

        function askQuickQuestion(question) {
            document.getElementById('chatInput').value = question;
            sendMessage();
        }

        function addMessageToChat(message, sender) {
            const chatMessages = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'flex items-start space-x-3 animate-fadeIn';
            
            if (sender === 'user') {
                messageDiv.innerHTML = `
                    <div class="w-10 h-10 bg-gradient-to-r from-green-500 to-blue-500 rounded-full flex items-center justify-center">
                        <i class="fas fa-user text-white"></i>
                    </div>
                    <div class="bg-gradient-to-r from-green-100 to-blue-100 rounded-2xl p-4 shadow-sm max-w-md">
                        <p class="text-gray-800">${message}</p>
                    </div>
                `;
            } else {
                messageDiv.innerHTML = `
                    <div class="w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center">
                        <i class="fas fa-robot text-white"></i>
                    </div>
                    <div class="bg-white rounded-2xl p-4 shadow-sm max-w-md border border-gray-200">
                        <p class="text-gray-800">${message}</p>
                        <div class="mt-2 text-xs text-gray-500 flex items-center">
                            <i class="fas fa-robot mr-1"></i>
                            AI Response • ${new Date().toLocaleTimeString()}
                        </div>
                    </div>
                `;
            }
            
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
            
            // Store in history
            chatHistory.push({ message, sender, timestamp: new Date() });
        }

        function showTypingIndicator() {
            const chatMessages = document.getElementById('chatMessages');
            const typingDiv = document.createElement('div');
            typingDiv.id = 'typingIndicator';
            typingDiv.className = 'flex items-start space-x-3';
            typingDiv.innerHTML = `
                <div class="w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center">
                    <i class="fas fa-robot text-white"></i>
                </div>
                <div class="bg-white rounded-2xl p-4 shadow-sm">
                    <div class="flex space-x-1">
                        <div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce"></div>
                        <div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style="animation-delay: 0.1s;"></div>
                        <div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style="animation-delay: 0.2s;"></div>
                    </div>
                </div>
            `;
            chatMessages.appendChild(typingDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function hideTypingIndicator() {
            const typingIndicator = document.getElementById('typingIndicator');
            if (typingIndicator) {
                typingIndicator.remove();
            }
        }

        function generateAIResponse(message) {
            const lowerMessage = message.toLowerCase();
            
            // Get current location context
            const state = stateDistricts[selectedState];
            const district = state.districts.find(d => d.value === selectedDistrict);
            const locationContext = `${state.name} - ${district.name}`;
            
            // Crop-related responses
            if (lowerMessage.includes('crop') || lowerMessage.includes('plant') || lowerMessage.includes('grow')) {
                const crops = ['Rice', 'Coconut', 'Pepper', 'Cardamom', 'Banana'];
                const recommendedCrop = crops[Math.floor(Math.random() * crops.length)];
                return `🌱 Based on your location in ${locationContext}, I recommend ${recommendedCrop}. The soil conditions and climate are perfect for this crop. Current market price is favorable with 85% success rate in your region. Would you like detailed cultivation guidelines?`;
            }
            
            // Weather-related responses
            if (lowerMessage.includes('weather') || lowerMessage.includes('rain') || lowerMessage.includes('temperature')) {
                return `🌤️ Current weather in ${locationContext}: 28°C with 72% humidity. Perfect conditions for most crops! Light rainfall expected in 2 days (12mm) - ideal for irrigation planning. UV index is moderate at 6. Would you like a 7-day detailed forecast?`;
            }
            
            // Disease-related responses
            if (lowerMessage.includes('disease') || lowerMessage.includes('pest') || lowerMessage.includes('problem') || lowerMessage.includes('sick')) {
                return `🔬 For disease identification, I can analyze plant images with 95% accuracy! Common issues in ${locationContext} include leaf blight and root rot. Upload a photo or describe symptoms like leaf color, spots, or wilting. I'll provide instant diagnosis and treatment recommendations.`;
            }
            
            // Fertilizer-related responses
            if (lowerMessage.includes('fertilizer') || lowerMessage.includes('nutrient') || lowerMessage.includes('npk')) {
                return `🧪 For your soil type in ${locationContext}, I recommend balanced NPK fertilization. Based on current crop stage, apply 120kg Urea, 80kg DAP, and 60kg MOP per acre. This will cost approximately ₹8,500 and increase yield by 25%. Want a detailed application schedule?`;
            }
            
            // Market/price-related responses
            if (lowerMessage.includes('price') || lowerMessage.includes('market') || lowerMessage.includes('sell')) {
                return `📈 Current market trends for ${locationContext}: Spices are up 15% this month! Cardamom: ₹1,200/kg, Pepper: ₹450/kg, Coconut: ₹25/piece. Best selling time is next 2 weeks. I can help you find nearby buyers and optimal pricing strategies.`;
            }
            
            // General farming advice
            if (lowerMessage.includes('help') || lowerMessage.includes('advice') || lowerMessage.includes('suggest')) {
                return `🎯 I'm here to help with all your farming needs! I can assist with crop selection, disease diagnosis, fertilizer calculations, weather forecasts, and market insights. What specific challenge are you facing? Just describe your situation and I'll provide personalized AI-powered recommendations.`;
            }
            
            // Seasonal advice
            if (lowerMessage.includes('season') || lowerMessage.includes('when') || lowerMessage.includes('time')) {
                return `📅 Perfect timing! In ${locationContext}, this is ideal for Kharif season crops. Plant rice by next week, pepper vines can be established now, and coconut saplings thrive in current conditions. Monsoon arrival expected in 15 days - prepare your fields accordingly!`;
            }
            
            // Default intelligent response
            const responses = [
                `🤖 Great question! Based on your location in ${locationContext}, I can provide specific recommendations. Could you tell me more about your current crops or farming goals?`,
                `🌾 I understand you're looking for farming guidance. With AI analysis of your region's data, I can help optimize your agricultural practices. What's your main concern?`,
                `📊 Using real-time data from ${locationContext}, I can provide personalized farming insights. Are you interested in crop management, disease prevention, or yield optimization?`,
                `🎯 As your AI farm assistant, I'm analyzing conditions in ${locationContext} to give you the best advice. What specific farming challenge can I help you solve today?`
            ];
            
            return responses[Math.floor(Math.random() * responses.length)];
        }

        function speakResponse(text) {
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = currentLanguage === 'ta' ? 'ta-IN' : 'en-US';
                utterance.rate = 0.9;
                utterance.pitch = 1;
                speechSynthesis.speak(utterance);
            }
        }

        // Location Selector Functions
        function initializeLocationSelector() {
            populateStatesInModal();
            populateDistrictsInModal(selectedState);
            updateLocationDisplay();
        }

        function showLocationSelector() {
            const modal = document.getElementById('locationModal');
            modal.classList.remove('hidden');
            populateStatesInModal();
            populateDistrictsInModal(selectedState);
            
            // Prevent body scroll when modal is open
            document.body.style.overflow = 'hidden';
            
            // Add click outside to close functionality
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    closeLocationModal();
                }
            });
        }

        function closeLocationModal() {
            document.getElementById('locationModal').classList.add('hidden');
            // Restore body scroll
            document.body.style.overflow = 'auto';
        }

        function populateStatesInModal() {
            const statesList = document.getElementById('statesList');
            statesList.innerHTML = Object.keys(stateDistricts).map(stateKey => {
                const state = stateDistricts[stateKey];
                const isSelected = stateKey === selectedState;
                return `
                    <button onclick="selectState('${stateKey}')" class="w-full p-4 rounded-2xl border-2 transition-all duration-300 text-left ${isSelected ? 'border-blue-500 bg-blue-50' : 'border-gray-200 hover:border-blue-300 hover:bg-blue-50'}">
                        <div class="flex items-center justify-between">
                            <div>
                                <h4 class="font-bold text-gray-900 text-lg">${state.name}</h4>
                                <p class="text-sm text-gray-600 mt-1">${state.description}</p>
                                <div class="flex items-center space-x-4 mt-2 text-xs text-gray-500">
                                    <span>🌡️ ${state.climate}</span>
                                    <span>🌾 ${state.mainCrops.split(',')[0]}...</span>
                                </div>
                            </div>
                            ${isSelected ? '<i class="fas fa-check-circle text-blue-500 text-xl"></i>' : '<i class="fas fa-chevron-right text-gray-400"></i>'}
                        </div>
                    </button>
                `;
            }).join('');
        }

        function populateDistrictsInModal(stateKey) {
            const districtsList = document.getElementById('districtsList');
            const state = stateDistricts[stateKey];
            
            document.getElementById('selectedStateName').textContent = `(${state.name})`;
            
            districtsList.innerHTML = state.districts.map(district => {
                const isSelected = district.value === selectedDistrict;
                return `
                    <button onclick="selectDistrict('${district.value}')" class="w-full p-4 rounded-2xl border-2 transition-all duration-300 text-left ${isSelected ? 'border-green-500 bg-green-50' : 'border-gray-200 hover:border-green-300 hover:bg-green-50'}">
                        <div class="flex items-center justify-between">
                            <div>
                                <h4 class="font-bold text-gray-900 text-lg">${district.name}</h4>
                                <p class="text-sm text-gray-600 mt-1">${district.speciality}</p>
                                <div class="flex items-center space-x-4 mt-2 text-xs text-gray-500">
                                    <span>🌡️ ${district.temperature}</span>
                                    <span>🌧️ ${district.rainfall}</span>
                                    <span>🌾 ${district.mainCrops.split(',')[0]}</span>
                                </div>
                            </div>
                            ${isSelected ? '<i class="fas fa-check-circle text-green-500 text-xl"></i>' : '<i class="fas fa-chevron-right text-gray-400"></i>'}
                        </div>
                    </button>
                `;
            }).join('');
        }

        function selectState(stateKey) {
            selectedState = stateKey;
            selectedDistrict = stateDistricts[stateKey].districts[0].value; // Select first district
            populateStatesInModal();
            populateDistrictsInModal(stateKey);
            showLocationDetails();
        }

        function selectDistrict(districtValue) {
            selectedDistrict = districtValue;
            populateDistrictsInModal(selectedState);
            showLocationDetails();
        }

        function showLocationDetails() {
            const state = stateDistricts[selectedState];
            const district = state.districts.find(d => d.value === selectedDistrict);
            
            if (!district) return;
            
            // Update location details panel
            document.getElementById('selectedLat').textContent = district.lat;
            document.getElementById('selectedLon').textContent = district.lon;
            document.getElementById('selectedElevation').textContent = district.elevation;
            document.getElementById('selectedClimate').textContent = district.climate;
            document.getElementById('selectedRainfall').textContent = district.rainfall;
            document.getElementById('selectedTemp').textContent = district.temperature;
            document.getElementById('selectedCrops').textContent = district.mainCrops;
            document.getElementById('selectedSoil').textContent = district.soilType;
            document.getElementById('selectedSeason').textContent = district.season;
            
            // Show the details panel
            document.getElementById('locationDetails').classList.remove('hidden');
        }

        function confirmLocationSelection() {
            updateLocationDisplay();
            closeLocationModal();
            
            // Reload data for new location
            loadCropRecommendations();
            loadWeatherData();
            
            // Show success notification
            const state = stateDistricts[selectedState];
            const district = state.districts.find(d => d.value === selectedDistrict);
            showNotification(`📍 Location updated to ${state.name} - ${district.name}`, 'success');
        }

        // Add escape key support for modal
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                const modal = document.getElementById('locationModal');
                if (!modal.classList.contains('hidden')) {
                    closeLocationModal();
                }
            }
        });

        function updateLocationDisplay() {
            const state = stateDistricts[selectedState];
            const district = state.districts.find(d => d.value === selectedDistrict);
            
            if (state && district) {
                const displayText = `${state.name} - ${district.name}`;
                document.getElementById('selectedLocationDisplay').textContent = displayText;
                document.getElementById('mobileLocationDisplay').textContent = displayText;
            }
        }

        // Real-time weather data loading
        async function loadWeatherData() {
            const state = stateDistricts[selectedState];
            const district = state.districts.find(d => d.value === selectedDistrict);
            
            if (!district) return;

            try {
                // Show loading state
                document.getElementById('weatherLoader').classList.remove('hidden');
                document.getElementById('weatherIcon').classList.add('hidden');

                // Try to fetch real weather data
                const realWeatherData = await fetchRealWeatherData(district);
                
                if (realWeatherData) {
                    // Update with real data
                    updateCurrentWeather(realWeatherData);
                    updateWeatherForecast(realWeatherData);
                    updateWeatherChart(realWeatherData);
                } else {
                    // Fallback to enhanced mock data
                    const mockWeatherData = await simulateWeatherAPI(district);
                    updateCurrentWeather(mockWeatherData);
                    updateWeatherForecast(mockWeatherData);
                    updateWeatherChart(mockWeatherData);
                }
                
                // Hide loading state
                document.getElementById('weatherLoader').classList.add('hidden');
                document.getElementById('weatherIcon').classList.remove('hidden');
                
            } catch (error) {
                console.error('Weather data loading failed:', error);
                // Fallback to mock data
                const mockWeatherData = await simulateWeatherAPI(district);
                updateCurrentWeather(mockWeatherData);
                updateWeatherForecast(mockWeatherData);
                updateWeatherChart(mockWeatherData);
                
                document.getElementById('weatherLoader').classList.add('hidden');
                document.getElementById('weatherIcon').classList.remove('hidden');
            }
        }

        // Fetch real weather data from OpenWeatherMap API
        async function fetchRealWeatherData(district) {
            try {
                // Add timeout to prevent hanging requests
                const controller = new AbortController();
                const timeoutId = setTimeout(() => controller.abort(), 10000); // 10 second timeout
                
                // Current weather
                const currentResponse = await fetch(
                    `${WEATHER_BASE_URL}/weather?lat=${district.lat}&lon=${district.lon}&appid=${WEATHER_API_KEY}&units=metric`,
                    { signal: controller.signal }
                );
                
                clearTimeout(timeoutId);
                
                if (!currentResponse.ok) {
                    console.log('Weather API response not OK, using fallback data');
                    return null; // Will trigger fallback to mock data
                }
                
                const currentData = await currentResponse.json();
                
                // 5-day forecast
                const forecastController = new AbortController();
                const forecastTimeoutId = setTimeout(() => forecastController.abort(), 10000);
                
                const forecastResponse = await fetch(
                    `${WEATHER_BASE_URL}/forecast?lat=${district.lat}&lon=${district.lon}&appid=${WEATHER_API_KEY}&units=metric`,
                    { signal: forecastController.signal }
                );
                
                clearTimeout(forecastTimeoutId);
                const forecastData = forecastResponse.ok ? await forecastResponse.json() : null;
                
                return {
                    location: district.name,
                    current: {
                        temp: Math.round(currentData.main.temp),
                        feels_like: Math.round(currentData.main.feels_like),
                        humidity: currentData.main.humidity,
                        wind_speed: Math.round(currentData.wind.speed * 3.6), // Convert m/s to km/h
                        pressure: currentData.main.pressure,
                        visibility: Math.round((currentData.visibility || 10000) / 1000), // Convert to km
                        uv_index: Math.round(Math.random() * 11), // UV index not in free API
                        weather: currentData.weather[0].description,
                        icon: getWeatherIconFromAPI(currentData.weather[0].icon)
                    },
                    forecast: forecastData ? processAPIForecast(forecastData.list) : generateForecastData(currentData.main.temp),
                    hourly: forecastData ? processAPIHourly(forecastData.list) : generateHourlyData(currentData.main.temp)
                };
                
            } catch (error) {
                console.log('Weather API failed, using enhanced mock data:', error.message);
                return null; // Will trigger fallback to realistic mock data
            }
        }

        // Convert OpenWeatherMap icon codes to FontAwesome classes
        function getWeatherIconFromAPI(iconCode) {
            const iconMap = {
                '01d': 'fas fa-sun',
                '01n': 'fas fa-moon',
                '02d': 'fas fa-cloud-sun',
                '02n': 'fas fa-cloud-moon',
                '03d': 'fas fa-cloud',
                '03n': 'fas fa-cloud',
                '04d': 'fas fa-cloud',
                '04n': 'fas fa-cloud',
                '09d': 'fas fa-cloud-rain',
                '09n': 'fas fa-cloud-rain',
                '10d': 'fas fa-cloud-sun-rain',
                '10n': 'fas fa-cloud-moon-rain',
                '11d': 'fas fa-bolt',
                '11n': 'fas fa-bolt',
                '13d': 'fas fa-snowflake',
                '13n': 'fas fa-snowflake',
                '50d': 'fas fa-smog',
                '50n': 'fas fa-smog'
            };
            return iconMap[iconCode] || 'fas fa-sun';
        }

        // Process API forecast data
        function processAPIForecast(forecastList) {
            const days = ['Today', 'Tomorrow', 'Day 3', 'Day 4', 'Day 5', 'Day 6', 'Day 7'];
            const dailyData = {};
            
            // Group by day
            forecastList.forEach(item => {
                const date = new Date(item.dt * 1000).toDateString();
                if (!dailyData[date]) {
                    dailyData[date] = {
                        temps: [],
                        conditions: [],
                        icons: [],
                        rain: 0
                    };
                }
                dailyData[date].temps.push(item.main.temp);
                dailyData[date].conditions.push(item.weather[0].description);
                dailyData[date].icons.push(item.weather[0].icon);
                if (item.rain && item.rain['3h']) {
                    dailyData[date].rain += item.rain['3h'];
                }
            });
            
            // Convert to forecast format
            return Object.keys(dailyData).slice(0, 7).map((date, index) => {
                const dayData = dailyData[date];
                return {
                    day: days[index] || `Day ${index + 1}`,
                    high: Math.round(Math.max(...dayData.temps)),
                    low: Math.round(Math.min(...dayData.temps)),
                    condition: dayData.conditions[0],
                    icon: getWeatherIconFromAPI(dayData.icons[0]),
                    rain: Math.round((dayData.rain / dayData.temps.length) * 100)
                };
            });
        }

        // Process API hourly data
        function processAPIHourly(forecastList) {
            return forecastList.slice(0, 24).map(item => {
                const date = new Date(item.dt * 1000);
                return {
                    time: date.getHours() + ':00',
                    temp: Math.round(item.main.temp),
                    icon: getWeatherIconFromAPI(item.weather[0].icon),
                    rain: item.pop ? Math.round(item.pop * 100) : 0
                };
            });
        }

        // Simulate weather API with realistic data
        async function simulateWeatherAPI(district) {
            // Simulate API delay
            await new Promise(resolve => setTimeout(resolve, 1000));
            
            const baseTemp = 25 + Math.random() * 10;
            const humidity = 60 + Math.random() * 30;
            const windSpeed = 5 + Math.random() * 15;
            
            return {
                location: district.name,
                current: {
                    temp: Math.round(baseTemp),
                    feels_like: Math.round(baseTemp + (Math.random() - 0.5) * 4),
                    humidity: Math.round(humidity),
                    wind_speed: Math.round(windSpeed),
                    pressure: Math.round(1010 + (Math.random() - 0.5) * 20),
                    visibility: Math.round(8 + Math.random() * 7),
                    uv_index: Math.round(Math.random() * 11),
                    weather: getWeatherCondition(baseTemp, humidity),
                    icon: getWeatherIcon(baseTemp, humidity)
                },
                forecast: generateForecastData(baseTemp),
                hourly: generateHourlyData(baseTemp)
            };
        }

        function getWeatherCondition(temp, humidity) {
            if (humidity > 80) return "Rainy";
            if (temp > 35) return "Very Hot";
            if (temp > 30) return "Hot";
            if (temp > 25) return "Warm";
            if (temp > 20) return "Pleasant";
            return "Cool";
        }

        function getWeatherIcon(temp, humidity) {
            if (humidity > 80) return "fas fa-cloud-rain";
            if (temp > 35) return "fas fa-sun";
            if (temp > 25) return "fas fa-sun";
            return "fas fa-cloud-sun";
        }

        function generateForecastData(baseTemp) {
            const days = ['Today', 'Tomorrow', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];
            return days.map((day, index) => ({
                day,
                high: Math.round(baseTemp + (Math.random() - 0.5) * 6),
                low: Math.round(baseTemp - 5 + (Math.random() - 0.5) * 4),
                condition: getWeatherCondition(baseTemp, 60 + Math.random() * 20),
                icon: getWeatherIcon(baseTemp, 60 + Math.random() * 20),
                rain: Math.round(Math.random() * 100)
            }));
        }

        function generateHourlyData(baseTemp) {
            const hours = [];
            for (let i = 0; i < 24; i++) {
                const hour = new Date();
                hour.setHours(hour.getHours() + i);
                hours.push({
                    time: hour.getHours() + ':00',
                    temp: Math.round(baseTemp + (Math.random() - 0.5) * 8),
                    icon: getWeatherIcon(baseTemp, 60 + Math.random() * 20),
                    rain: Math.round(Math.random() * 100)
                });
            }
            return hours;
        }

        function updateCurrentWeather(data) {
            document.getElementById('currentTemp').textContent = data.current.temp + '°C';
            document.getElementById('currentHumidity').textContent = data.current.humidity + '%';
            document.getElementById('windSpeed').textContent = data.current.wind_speed + ' km/h';
            document.getElementById('locationName').textContent = data.location;
            document.getElementById('weatherDesc').textContent = data.current.weather;
            
            // Update main weather display
            document.getElementById('currentLocation').textContent = data.location;
            document.getElementById('mainTemp').textContent = data.current.temp + '°C';
            document.getElementById('mainWeatherDesc').textContent = data.current.weather;
            document.getElementById('feelsLike').textContent = data.current.feels_like + '°C';
            document.getElementById('uvIndex').textContent = data.current.uv_index;
            document.getElementById('pressure').textContent = data.current.pressure + ' hPa';
            document.getElementById('visibility').textContent = data.current.visibility + ' km';
            document.getElementById('lastUpdated').textContent = new Date().toLocaleTimeString();
            
            // Update weather icons
            const iconClass = data.current.icon;
            document.getElementById('weatherIcon').className = iconClass + ' text-3xl weather-animation';
            document.getElementById('mainWeatherIcon').innerHTML = `<i class="${iconClass}"></i>`;
        }

        function updateWeatherForecast(data) {
            const forecastContainer = document.getElementById('weeklyForecast');
            forecastContainer.innerHTML = data.forecast.map(day => `
                <div class="bg-gray-50 rounded-2xl p-6 text-center card-hover">
                    <div class="font-semibold text-gray-900 mb-2">${day.day}</div>
                    <div class="text-3xl mb-3">
                        <i class="${day.icon} text-blue-500"></i>
                    </div>
                    <div class="text-sm text-gray-600 mb-2">${day.condition}</div>
                    <div class="font-bold text-gray-900">${day.high}°/${day.low}°</div>
                    <div class="text-xs text-blue-600 mt-1">${day.rain}% rain</div>
                </div>
            `).join('');

            const hourlyContainer = document.getElementById('hourlyForecast');
            hourlyContainer.innerHTML = data.hourly.slice(0, 12).map(hour => `
                <div class="bg-gray-50 rounded-2xl p-4 text-center min-w-[100px] card-hover">
                    <div class="text-sm font-medium text-gray-600 mb-2">${hour.time}</div>
                    <div class="text-2xl mb-2">
                        <i class="${hour.icon} text-blue-500"></i>
                    </div>
                    <div class="font-bold text-gray-900">${hour.temp}°</div>
                    <div class="text-xs text-blue-600 mt-1">${hour.rain}%</div>
                </div>
            `).join('');
        }

        function updateWeatherChart(data) {
            if (weatherChart) {
                const labels = data.hourly.slice(0, 12).map(h => h.time);
                const temps = data.hourly.slice(0, 12).map(h => h.temp);
                const rainfall = data.hourly.slice(0, 12).map(h => h.rain);
                
                weatherChart.data.labels = labels;
                weatherChart.data.datasets[0].data = temps;
                weatherChart.data.datasets[1].data = rainfall;
                weatherChart.update();
            }
        }

        function generateLiveAlerts() {
            const alerts = [
                {
                    type: 'ai',
                    icon: 'fas fa-brain',
                    color: 'purple',
                    title: '🤖 AI Insight',
                    message: 'Optimal irrigation window detected: Next 4-6 hours based on soil moisture & weather patterns',
                    confidence: '94%',
                    impact: 'High',
                    time: 'Just now',
                    action: 'Schedule irrigation'
                },
                {
                    type: 'weather',
                    icon: 'fas fa-cloud-rain',
                    color: 'blue',
                    title: '🌧️ Weather Intelligence',
                    message: 'Light rainfall (12mm) predicted in 6 hours. Delay fertilizer application by 24 hours',
                    confidence: '87%',
                    impact: 'Medium',
                    time: '2 min ago',
                    action: 'Adjust schedule'
                },
                {
                    type: 'crop',
                    icon: 'fas fa-seedling',
                    color: 'green',
                    title: '🌱 Growth Optimization',
                    message: 'Nitrogen levels optimal for vegetative growth. Consider increasing potassium for flowering stage',
                    confidence: '91%',
                    impact: 'High',
                    time: '8 min ago',
                    action: 'Update nutrition plan'
                },
                {
                    type: 'market',
                    icon: 'fas fa-trending-up',
                    color: 'orange',
                    title: '📈 Market Intelligence',
                    message: 'Tomato prices surged 15% this week. Consider early harvest for premium pricing',
                    confidence: '89%',
                    impact: 'High',
                    time: '15 min ago',
                    action: 'Plan harvest'
                },
                {
                    type: 'disease',
                    icon: 'fas fa-shield-alt',
                    color: 'red',
                    title: '🛡️ Disease Prevention',
                    message: 'Fungal risk elevated due to humidity. Preventive spray recommended within 48 hours',
                    confidence: '82%',
                    impact: 'Medium',
                    time: '32 min ago',
                    action: 'Apply treatment'
                },
                {
                    type: 'efficiency',
                    icon: 'fas fa-bolt',
                    color: 'yellow',
                    title: '⚡ Efficiency Boost',
                    message: 'AI detected 23% water savings opportunity in sector B. Adjust drip irrigation timing',
                    confidence: '96%',
                    impact: 'High',
                    time: '1 hour ago',
                    action: 'Optimize system'
                }
            ];

            const alertsContainer = document.getElementById('liveAlerts');
            alertsContainer.innerHTML = alerts.map((alert, index) => `
                <div class="stagger-animation bg-gradient-to-r from-${alert.color}-50 to-${alert.color}-100 rounded-3xl p-6 card-hover border border-${alert.color}-200 relative overflow-hidden" style="animation-delay: ${index * 0.1}s;">
                    <!-- Background Pattern -->
                    <div class="absolute top-0 right-0 w-32 h-32 bg-${alert.color}-200 rounded-full opacity-20 -mr-16 -mt-16"></div>
                    
                    <div class="relative z-10">
                        <div class="flex items-start justify-between mb-4">
                            <div class="flex items-center space-x-3">
                                <div class="w-12 h-12 bg-gradient-to-br from-${alert.color}-500 to-${alert.color}-600 rounded-2xl flex items-center justify-center shadow-lg">
                                    <i class="${alert.icon} text-white text-lg"></i>
                                </div>
                                <div>
                                    <h4 class="font-black text-${alert.color}-900 text-lg">${alert.title}</h4>
                                    <div class="flex items-center space-x-3 mt-1">
                                        <span class="text-xs bg-${alert.color}-200 text-${alert.color}-800 px-2 py-1 rounded-full font-bold">
                                            ${alert.confidence} Confidence
                                        </span>
                                        <span class="text-xs bg-gray-200 text-gray-700 px-2 py-1 rounded-full font-bold">
                                            ${alert.impact} Impact
                                        </span>
                                    </div>
                                </div>
                            </div>
                            <div class="text-right">
                                <div class="text-xs text-${alert.color}-600 font-semibold">${alert.time}</div>
                            </div>
                        </div>
                        
                        <p class="text-${alert.color}-800 text-sm leading-relaxed mb-4 font-medium">
                            ${alert.message}
                        </p>
                        
                        <div class="flex items-center justify-between">
                            <button class="bg-${alert.color}-600 hover:bg-${alert.color}-700 text-white px-4 py-2 rounded-xl text-xs font-bold transition-colors shadow-md">
                                <i class="fas fa-check mr-1"></i>
                                ${alert.action}
                            </button>
                            <div class="flex items-center space-x-2 text-xs text-${alert.color}-600">
                                <i class="fas fa-robot"></i>
                                <span class="font-semibold">AI Generated</span>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function loadCropRecommendations() {
            const currentState = selectedState;
            const currentDistrict = selectedDistrict;
            
            // Get form values for personalized recommendations
            const soilType = document.querySelector('#cropForm select:nth-child(1) select')?.value || 'laterite';
            const season = document.querySelector('#cropForm select:nth-child(2) select')?.value || 'kharif';
            const farmArea = document.querySelector('#cropForm input[type="number"]')?.value || 2;
            
            // State-specific crop database with detailed information
            const cropDatabase = {
                kerala: [
                    {
                        name: 'Rice',
                        icon: '🌾',
                        suitability: 95,
                        season: 'Kharif (Jun-Nov)',
                        yield: '4-6 tons/acre',
                        profit: '₹45,000/acre',
                        health: 94,
                        description: 'Staple crop with guaranteed market and government support',
                        soilType: 'Clay loam with water retention',
                        waterReq: 'High (1000-1200mm)',
                        growthPeriod: '120-150 days',
                        marketDemand: 'Very High',
                        riskLevel: 'Low',
                        investment: '₹25,000/acre'
                    },
                    {
                        name: 'Coconut',
                        icon: '🥥',
                        suitability: 92,
                        season: 'Perennial',
                        yield: '80-120 nuts/palm/year',
                        profit: '₹55,000/acre',
                        health: 88,
                        description: 'Multi-purpose palm with diverse income streams',
                        soilType: 'Sandy loam coastal soil',
                        waterReq: 'Moderate (1200-1800mm)',
                        growthPeriod: '5-6 years to maturity',
                        marketDemand: 'High',
                        riskLevel: 'Low',
                        investment: '₹35,000/acre'
                    },
                    {
                        name: 'Black Pepper',
                        icon: '🌶️',
                        suitability: 88,
                        season: 'Perennial',
                        yield: '800-1200 kg/acre',
                        profit: '₹1,20,000/acre',
                        health: 91,
                        description: 'High-value spice crop with export potential',
                        soilType: 'Well-drained laterite soil',
                        waterReq: 'Moderate (1250-2000mm)',
                        growthPeriod: '3-4 years to maturity',
                        marketDemand: 'Very High',
                        riskLevel: 'Medium',
                        investment: '₹80,000/acre'
                    },
                    {
                        name: 'Cardamom',
                        icon: '🫚',
                        suitability: 82,
                        season: 'Perennial',
                        yield: '300-500 kg/acre',
                        profit: '₹1,50,000/acre',
                        health: 89,
                        description: 'Premium spice with highest profit margins',
                        soilType: 'Forest loam with organic matter',
                        waterReq: 'High (1500-4000mm)',
                        growthPeriod: '3-4 years to maturity',
                        marketDemand: 'Very High',
                        riskLevel: 'Medium',
                        investment: '₹1,00,000/acre'
                    },
                    {
                        name: 'Banana',
                        icon: '🍌',
                        suitability: 89,
                        season: 'Year-round',
                        yield: '35-45 tons/acre',
                        profit: '₹95,000/acre',
                        health: 94,
                        description: 'Tropical fruit with consistent income potential',
                        soilType: 'Rich alluvial soil',
                        waterReq: 'High (1200-1500mm)',
                        growthPeriod: '12-15 months',
                        marketDemand: 'High',
                        riskLevel: 'Low',
                        investment: '₹40,000/acre'
                    },
                    {
                        name: 'Rubber',
                        icon: '🌳',
                        suitability: 85,
                        season: 'Perennial',
                        yield: '1500-2000 kg/acre/year',
                        profit: '₹75,000/acre',
                        health: 87,
                        description: 'Long-term investment with steady income',
                        soilType: 'Well-drained laterite soil',
                        waterReq: 'High (2000-2500mm)',
                        growthPeriod: '7 years to maturity',
                        marketDemand: 'High',
                        riskLevel: 'Low',
                        investment: '₹50,000/acre'
                    }
                ],
                tamilnadu: [
                    {
                        name: 'Rice',
                        icon: '🌾',
                        suitability: 94,
                        season: 'Kharif & Rabi',
                        yield: '5-7 tons/acre',
                        profit: '₹50,000/acre',
                        health: 93,
                        description: 'Delta region specialty with high yields',
                        soilType: 'Alluvial clay soil',
                        waterReq: 'High (1000-1200mm)',
                        growthPeriod: '120-140 days',
                        marketDemand: 'Very High',
                        riskLevel: 'Low',
                        investment: '₹30,000/acre'
                    },
                    {
                        name: 'Sugarcane',
                        icon: '🎋',
                        suitability: 92,
                        season: 'Perennial',
                        yield: '100-120 tons/acre',
                        profit: '₹85,000/acre',
                        health: 90,
                        description: 'High-yield cash crop with sugar mill support',
                        soilType: 'Rich alluvial soil',
                        waterReq: 'Very High (1500-2000mm)',
                        growthPeriod: '12-18 months',
                        marketDemand: 'High',
                        riskLevel: 'Medium',
                        investment: '₹45,000/acre'
                    },
                    {
                        name: 'Cotton',
                        icon: '🌸',
                        suitability: 88,
                        season: 'Kharif',
                        yield: '20-25 quintals/acre',
                        profit: '₹70,000/acre',
                        health: 86,
                        description: 'Textile industry staple with good returns',
                        soilType: 'Black cotton soil',
                        waterReq: 'Moderate (600-800mm)',
                        growthPeriod: '180-200 days',
                        marketDemand: 'High',
                        riskLevel: 'Medium',
                        investment: '₹35,000/acre'
                    },
                    {
                        name: 'Turmeric',
                        icon: '🟡',
                        suitability: 90,
                        season: 'Kharif',
                        yield: '25-30 quintals/acre',
                        profit: '₹1,10,000/acre',
                        health: 92,
                        description: 'High-value spice with medicinal properties',
                        soilType: 'Red loamy soil',
                        waterReq: 'Moderate (1000mm)',
                        growthPeriod: '8-10 months',
                        marketDemand: 'Very High',
                        riskLevel: 'Low',
                        investment: '₹60,000/acre'
                    }
                ],
                maharashtra: [
                    {
                        name: 'Cotton',
                        icon: '🌸',
                        suitability: 93,
                        season: 'Kharif',
                        yield: '18-22 quintals/acre',
                        profit: '₹75,000/acre',
                        health: 87,
                        description: 'Maharashtra\'s white gold with strong market',
                        soilType: 'Black cotton soil',
                        waterReq: 'Moderate (600-800mm)',
                        growthPeriod: '180-200 days',
                        marketDemand: 'Very High',
                        riskLevel: 'Medium',
                        investment: '₹40,000/acre'
                    },
                    {
                        name: 'Sugarcane',
                        icon: '🎋',
                        suitability: 91,
                        season: 'Perennial',
                        yield: '90-110 tons/acre',
                        profit: '₹80,000/acre',
                        health: 89,
                        description: 'Cooperative sugar mills ensure good prices',
                        soilType: 'Deep black soil',
                        waterReq: 'High (1200-1500mm)',
                        growthPeriod: '12-15 months',
                        marketDemand: 'High',
                        riskLevel: 'Low',
                        investment: '₹50,000/acre'
                    },
                    {
                        name: 'Soybean',
                        icon: '🫘',
                        suitability: 89,
                        season: 'Kharif',
                        yield: '15-20 quintals/acre',
                        profit: '₹55,000/acre',
                        health: 91,
                        description: 'Protein-rich oilseed with good demand',
                        soilType: 'Well-drained black soil',
                        waterReq: 'Moderate (600-800mm)',
                        growthPeriod: '90-120 days',
                        marketDemand: 'High',
                        riskLevel: 'Low',
                        investment: '₹25,000/acre'
                    },
                    {
                        name: 'Grapes',
                        icon: '🍇',
                        suitability: 85,
                        season: 'Perennial',
                        yield: '15-20 tons/acre',
                        profit: '₹2,00,000/acre',
                        health: 88,
                        description: 'Premium fruit with export opportunities',
                        soilType: 'Well-drained red soil',
                        waterReq: 'Moderate with drip irrigation',
                        growthPeriod: '3 years to full production',
                        marketDemand: 'Very High',
                        riskLevel: 'High',
                        investment: '₹1,50,000/acre'
                    }
                ],
                gujarat: [
                    {
                        name: 'Cotton',
                        icon: '🌸',
                        suitability: 95,
                        season: 'Kharif',
                        yield: '20-25 quintals/acre',
                        profit: '₹80,000/acre',
                        health: 90,
                        description: 'Gujarat\'s premier cash crop with BT varieties',
                        soilType: 'Black cotton soil',
                        waterReq: 'Moderate (600-800mm)',
                        growthPeriod: '180-200 days',
                        marketDemand: 'Very High',
                        riskLevel: 'Medium',
                        investment: '₹45,000/acre'
                    },
                    {
                        name: 'Groundnut',
                        icon: '🥜',
                        suitability: 91,
                        season: 'Kharif & Rabi',
                        yield: '25-30 quintals/acre',
                        profit: '₹65,000/acre',
                        health: 92,
                        description: 'Oil-rich legume with dual season cultivation',
                        soilType: 'Sandy loam soil',
                        waterReq: 'Moderate (500-750mm)',
                        growthPeriod: '100-120 days',
                        marketDemand: 'High',
                        riskLevel: 'Low',
                        investment: '₹30,000/acre'
                    },
                    {
                        name: 'Cumin',
                        icon: '🌿',
                        suitability: 88,
                        season: 'Rabi',
                        yield: '4-6 quintals/acre',
                        profit: '₹1,20,000/acre',
                        health: 87,
                        description: 'High-value spice with global demand',
                        soilType: 'Sandy loam soil',
                        waterReq: 'Low (300-400mm)',
                        growthPeriod: '120-130 days',
                        marketDemand: 'Very High',
                        riskLevel: 'Medium',
                        investment: '₹40,000/acre'
                    },
                    {
                        name: 'Wheat',
                        icon: '🌾',
                        suitability: 86,
                        season: 'Rabi',
                        yield: '25-30 quintals/acre',
                        profit: '₹45,000/acre',
                        health: 89,
                        description: 'Staple grain with government procurement',
                        soilType: 'Alluvial soil',
                        waterReq: 'Moderate (400-500mm)',
                        growthPeriod: '120-150 days',
                        marketDemand: 'High',
                        riskLevel: 'Low',
                        investment: '₹25,000/acre'
                    }
                ],
                karnataka: [
                    {
                        name: 'Coffee',
                        icon: '☕',
                        suitability: 92,
                        season: 'Perennial',
                        yield: '800-1200 kg/acre',
                        profit: '₹1,80,000/acre',
                        health: 91,
                        description: 'Premium arabica coffee with international market',
                        soilType: 'Well-drained red soil',
                        waterReq: 'High (1500-2000mm)',
                        growthPeriod: '3-4 years to production',
                        marketDemand: 'Very High',
                        riskLevel: 'Medium',
                        investment: '₹1,20,000/acre'
                    },
                    {
                        name: 'Ragi',
                        icon: '🌾',
                        suitability: 89,
                        season: 'Kharif',
                        yield: '15-20 quintals/acre',
                        profit: '₹40,000/acre',
                        health: 94,
                        description: 'Nutritious millet with growing health food market',
                        soilType: 'Red sandy loam',
                        waterReq: 'Low (400-500mm)',
                        growthPeriod: '120-130 days',
                        marketDemand: 'High',
                        riskLevel: 'Low',
                        investment: '₹20,000/acre'
                    },
                    {
                        name: 'Areca Nut',
                        icon: '🥥',
                        suitability: 87,
                        season: 'Perennial',
                        yield: '1500-2000 nuts/palm/year',
                        profit: '₹90,000/acre',
                        health: 88,
                        description: 'Traditional crop with cultural significance',
                        soilType: 'Laterite soil with good drainage',
                        waterReq: 'High (2000-2500mm)',
                        growthPeriod: '6-8 years to production',
                        marketDemand: 'High',
                        riskLevel: 'Medium',
                        investment: '₹60,000/acre'
                    },
                    {
                        name: 'Mulberry',
                        icon: '🍃',
                        suitability: 85,
                        season: 'Perennial',
                        yield: '40-50 tons/acre/year',
                        profit: '₹70,000/acre',
                        health: 86,
                        description: 'Sericulture support crop with silk production',
                        soilType: 'Red loamy soil',
                        waterReq: 'Moderate (800-1000mm)',
                        growthPeriod: '1 year to full production',
                        marketDemand: 'High',
                        riskLevel: 'Low',
                        investment: '₹35,000/acre'
                    }
                ],
                andhra: [
                    {
                        name: 'Rice',
                        icon: '🌾',
                        suitability: 96,
                        season: 'Kharif & Rabi',
                        yield: '6-8 tons/acre',
                        profit: '₹55,000/acre',
                        health: 95,
                        description: 'Godavari delta premium rice with export quality',
                        soilType: 'Alluvial clay soil',
                        waterReq: 'High (1000-1200mm)',
                        growthPeriod: '120-140 days',
                        marketDemand: 'Very High',
                        riskLevel: 'Low',
                        investment: '₹35,000/acre'
                    },
                    {
                        name: 'Chili',
                        icon: '🌶️',
                        suitability: 93,
                        season: 'Kharif & Rabi',
                        yield: '15-20 quintals/acre',
                        profit: '₹1,25,000/acre',
                        health: 89,
                        description: 'Guntur chili famous worldwide for pungency',
                        soilType: 'Red sandy loam',
                        waterReq: 'Moderate (600-800mm)',
                        growthPeriod: '150-180 days',
                        marketDemand: 'Very High',
                        riskLevel: 'Medium',
                        investment: '₹50,000/acre'
                    },
                    {
                        name: 'Cotton',
                        icon: '🌸',
                        suitability: 90,
                        season: 'Kharif',
                        yield: '18-22 quintals/acre',
                        profit: '₹70,000/acre',
                        health: 87,
                        description: 'High-quality cotton with textile industry support',
                        soilType: 'Black cotton soil',
                        waterReq: 'Moderate (600-800mm)',
                        growthPeriod: '180-200 days',
                        marketDemand: 'High',
                        riskLevel: 'Medium',
                        investment: '₹40,000/acre'
                    },
                    {
                        name: 'Mango',
                        icon: '🥭',
                        suitability: 88,
                        season: 'Perennial',
                        yield: '8-12 tons/acre',
                        profit: '₹1,50,000/acre',
                        health: 90,
                        description: 'Alphonso and Banganapalli varieties with premium market',
                        soilType: 'Well-drained red soil',
                        waterReq: 'Moderate (750-1000mm)',
                        growthPeriod: '4-5 years to production',
                        marketDemand: 'Very High',
                        riskLevel: 'Low',
                        investment: '₹80,000/acre'
                    }
                ]
            };

            // Get crops for current state
            let recommendations = cropDatabase[currentState] || cropDatabase.kerala;
            
            // Get current location details for better recommendations
            const state = stateDistricts[currentState];
            const district = state.districts.find(d => d.value === currentDistrict);
            
            // Apply AI-based filtering and scoring
            recommendations = recommendations.map(crop => {
                let adjustedSuitability = crop.suitability;
                
                // Adjust based on form inputs (AI simulation)
                if (soilType && crop.soilType.toLowerCase().includes(soilType)) {
                    adjustedSuitability += 5;
                }
                if (season && crop.season.toLowerCase().includes(season)) {
                    adjustedSuitability += 3;
                }
                
                // Add some randomization for dynamic feel
                adjustedSuitability += Math.floor(Math.random() * 6) - 3;
                adjustedSuitability = Math.min(100, Math.max(60, adjustedSuitability));
                
                return {
                    ...crop,
                    suitability: adjustedSuitability,
                    aiScore: Math.floor(85 + Math.random() * 15), // AI confidence score
                    trending: Math.random() > 0.7 // Random trending flag
                };
            });
            
            // Sort by suitability
            recommendations.sort((a, b) => b.suitability - a.suitability);
            
            // Take top 6 recommendations
            recommendations = recommendations.slice(0, 6);

            const container = document.getElementById('cropRecommendations');
            if (!container) return;
            
            container.innerHTML = recommendations.map((crop, index) => `
                <div class="bg-white rounded-3xl shadow-xl p-8 card-hover relative overflow-hidden stagger-animation" style="animation-delay: ${index * 0.1}s;">
                    ${crop.trending ? '<div class="absolute top-4 right-4 bg-gradient-to-r from-orange-400 to-red-500 text-white px-3 py-1 rounded-full text-xs font-bold animate-pulse">🔥 TRENDING</div>' : ''}
                    
                    <div class="text-center mb-6">
                        <div class="text-6xl mb-4 animate-bounce" style="animation-delay: ${index * 0.2}s;">${crop.icon}</div>
                        <h3 class="text-2xl font-bold text-gray-900 mb-2">${crop.name}</h3>
                        <p class="text-sm text-gray-600 mb-4 leading-relaxed">${crop.description}</p>
                        
                        <!-- AI Suitability Score -->
                        <div class="mb-4">
                            <div class="flex items-center justify-between mb-2">
                                <span class="text-sm font-semibold text-gray-700">🤖 AI Suitability Score</span>
                                <span class="text-sm font-bold text-blue-600">${crop.aiScore}% Confidence</span>
                            </div>
                            <div class="bg-gray-200 rounded-full h-4 mb-2 relative overflow-hidden">
                                <div class="bg-gradient-to-r from-green-500 via-blue-500 to-purple-600 h-4 rounded-full transition-all duration-2000 relative" style="width: ${crop.suitability}%">
                                    <div class="absolute inset-0 bg-white opacity-30 animate-pulse"></div>
                                </div>
                            </div>
                            <p class="text-sm font-semibold text-gray-600">${crop.suitability}% Perfect Match for Your Farm</p>
                        </div>
                        
                        <!-- Quick Stats -->
                        <div class="grid grid-cols-2 gap-3 mb-4">
                            <div class="bg-green-50 rounded-xl p-3">
                                <div class="text-xs text-green-600 font-semibold">PROFIT POTENTIAL</div>
                                <div class="text-lg font-black text-green-800">${crop.profit}</div>
                            </div>
                            <div class="bg-blue-50 rounded-xl p-3">
                                <div class="text-xs text-blue-600 font-semibold">MARKET DEMAND</div>
                                <div class="text-lg font-black text-blue-800">${crop.marketDemand}</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Detailed Information -->
                    <div class="space-y-3 text-sm mb-6">
                        <div class="flex justify-between items-center p-2 bg-gray-50 rounded-lg">
                            <span class="text-gray-600 flex items-center"><i class="fas fa-calendar mr-2 text-purple-500"></i>Season:</span>
                            <span class="font-semibold text-purple-700">${crop.season}</span>
                        </div>
                        <div class="flex justify-between items-center p-2 bg-gray-50 rounded-lg">
                            <span class="text-gray-600 flex items-center"><i class="fas fa-weight-hanging mr-2 text-green-500"></i>Expected Yield:</span>
                            <span class="font-semibold text-green-700">${crop.yield}</span>
                        </div>
                        <div class="flex justify-between items-center p-2 bg-gray-50 rounded-lg">
                            <span class="text-gray-600 flex items-center"><i class="fas fa-seedling mr-2 text-brown-500"></i>Soil Type:</span>
                            <span class="font-semibold text-brown-700">${crop.soilType}</span>
                        </div>
                        <div class="flex justify-between items-center p-2 bg-gray-50 rounded-lg">
                            <span class="text-gray-600 flex items-center"><i class="fas fa-tint mr-2 text-cyan-500"></i>Water Req:</span>
                            <span class="font-semibold text-cyan-700">${crop.waterReq}</span>
                        </div>
                        <div class="flex justify-between items-center p-2 bg-gray-50 rounded-lg">
                            <span class="text-gray-600 flex items-center"><i class="fas fa-clock mr-2 text-indigo-500"></i>Growth Period:</span>
                            <span class="font-semibold text-indigo-700">${crop.growthPeriod}</span>
                        </div>
                        <div class="flex justify-between items-center p-2 bg-gray-50 rounded-lg">
                            <span class="text-gray-600 flex items-center"><i class="fas fa-coins mr-2 text-yellow-500"></i>Investment:</span>
                            <span class="font-semibold text-yellow-700">${crop.investment}</span>
                        </div>
                        <div class="flex justify-between items-center p-2 bg-gray-50 rounded-lg">
                            <span class="text-gray-600 flex items-center"><i class="fas fa-exclamation-triangle mr-2 text-red-500"></i>Risk Level:</span>
                            <span class="font-semibold text-red-700">${crop.riskLevel}</span>
                        </div>
                    </div>
                    
                    <!-- Action Buttons -->
                    <div class="space-y-3">
                        <button onclick="addToPortfolio('${crop.name}', '${crop.icon}')" class="w-full bg-gradient-to-r from-green-500 to-blue-600 text-white px-6 py-4 rounded-xl hover:from-green-600 hover:to-blue-700 transition-all duration-300 font-bold text-lg shadow-lg hover:shadow-xl transform hover:scale-105">
                            <i class="fas fa-plus mr-2"></i>
                            Add to My Portfolio
                        </button>
                        <button onclick="getCropDetails('${crop.name}')" class="w-full bg-gradient-to-r from-purple-500 to-pink-500 text-white px-6 py-3 rounded-xl hover:from-purple-600 hover:to-pink-600 transition-all duration-300 font-semibold shadow-md">
                            <i class="fas fa-info-circle mr-2"></i>
                            Get Detailed AI Analysis
                        </button>
                    </div>
                </div>
            `).join('');
        }

        function loadCropPortfolio() {
            const portfolio = [
                {
                    crop: 'Carrot',
                    icon: '🥕',
                    area: '1.5 acres',
                    planted: '15 Oct 2024',
                    stage: 'Vegetative',
                    health: 96,
                    harvest: 'Jan 2025'
                },
                {
                    crop: 'Banana',
                    icon: '🍌',
                    area: '2.0 acres',
                    planted: '01 Mar 2024',
                    stage: 'Flowering',
                    health: 94,
                    harvest: 'Mar 2025'
                },
                {
                    crop: 'Rice',
                    icon: '🌾',
                    area: '2.5 acres',
                    planted: '15 Jun 2024',
                    stage: 'Maturity',
                    health: 94,
                    harvest: 'Nov 2024'
                },
                {
                    crop: 'Coconut',
                    icon: '🥥',
                    area: '1.2 acres',
                    planted: '01 Jan 2020',
                    stage: 'Mature',
                    health: 88,
                    harvest: 'Ongoing'
                },
                {
                    crop: 'Black Pepper',
                    icon: '🌶️',
                    area: '0.8 acres',
                    planted: '15 Mar 2022',
                    stage: 'Vegetative',
                    health: 91,
                    harvest: 'Dec 2024'
                }
            ];

            const container = document.getElementById('cropPortfolio');
            container.innerHTML = portfolio.map(crop => `
                <tr class="border-b border-gray-100 hover:bg-gray-50 transition-colors">
                    <td class="py-4 px-6">
                        <div class="flex items-center">
                            <span class="text-3xl mr-3">${crop.icon}</span>
                            <span class="font-semibold text-gray-900">${crop.crop}</span>
                        </div>
                    </td>
                    <td class="py-4 px-6 text-gray-700">${crop.area}</td>
                    <td class="py-4 px-6 text-gray-700">${crop.planted}</td>
                    <td class="py-4 px-6">
                        <span class="px-3 py-1 text-xs font-semibold rounded-full ${getStageColor(crop.stage)}">
                            ${crop.stage}
                        </span>
                    </td>
                    <td class="py-4 px-6">
                        <div class="flex items-center">
                            <div class="w-16 bg-gray-200 rounded-full h-2 mr-2">
                                <div class="bg-green-500 h-2 rounded-full" style="width: ${crop.health}%"></div>
                            </div>
                            <span class="text-sm font-semibold">${crop.health}%</span>
                        </div>
                    </td>
                    <td class="py-4 px-6 text-gray-700">${crop.harvest}</td>
                    <td class="py-4 px-6">
                        <button class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors text-sm font-semibold">
                            <i class="fas fa-eye mr-1"></i>
                            Monitor
                        </button>
                    </td>
                </tr>
            `).join('');
        }

        function getStageColor(stage) {
            const colors = {
                'Flowering': 'bg-green-100 text-green-800',
                'Mature': 'bg-blue-100 text-blue-800',
                'Vegetative': 'bg-yellow-100 text-yellow-800',
                'Harvesting': 'bg-purple-100 text-purple-800'
            };
            return colors[stage] || 'bg-gray-100 text-gray-800';
        }

        function loadDiseaseDatabase() {
            const diseases = [
                {
                    name: 'Leaf Blight',
                    icon: '🦠',
                    severity: 'High',
                    crops: 'Rice, Wheat',
                    symptoms: 'Brown spots with yellow halos',
                    treatment: 'Copper-based fungicides'
                },
                {
                    name: 'Root Rot',
                    icon: '🍄',
                    severity: 'Medium',
                    crops: 'Coconut, Pepper',
                    symptoms: 'Yellowing leaves, wilting',
                    treatment: 'Improve drainage, fungicide'
                },
                {
                    name: 'Pest Infestation',
                    icon: '🐛',
                    severity: 'Medium',
                    crops: 'Multiple crops',
                    symptoms: 'Holes in leaves, stunted growth',
                    treatment: 'Organic pesticides, neem oil'
                },
                {
                    name: 'Powdery Mildew',
                    icon: '☁️',
                    severity: 'Low',
                    crops: 'Vegetables',
                    symptoms: 'White powdery coating',
                    treatment: 'Sulfur-based sprays'
                },
                {
                    name: 'Bacterial Wilt',
                    icon: '🦠',
                    severity: 'High',
                    crops: 'Tomato, Potato',
                    symptoms: 'Sudden wilting, brown stems',
                    treatment: 'Remove infected plants'
                },
                {
                    name: 'Aphid Attack',
                    icon: '🐜',
                    severity: 'Low',
                    crops: 'Most crops',
                    symptoms: 'Curled leaves, sticky honeydew',
                    treatment: 'Insecticidal soap, ladybugs'
                }
            ];

            const container = document.getElementById('diseaseDatabase');
            container.innerHTML = diseases.map(disease => `
                <div class="bg-white rounded-2xl shadow-lg p-6 card-hover">
                    <div class="text-center mb-4">
                        <div class="text-4xl mb-3">${disease.icon}</div>
                        <h3 class="text-lg font-bold text-gray-900">${disease.name}</h3>
                        <span class="px-3 py-1 text-xs font-semibold rounded-full ${getSeverityColor(disease.severity)}">
                            ${disease.severity} Risk
                        </span>
                    </div>
                    <div class="space-y-2 text-sm">
                        <div>
                            <span class="font-semibold text-gray-700">Affects:</span>
                            <span class="text-gray-600">${disease.crops}</span>
                        </div>
                        <div>
                            <span class="font-semibold text-gray-700">Symptoms:</span>
                            <span class="text-gray-600">${disease.symptoms}</span>
                        </div>
                        <div>
                            <span class="font-semibold text-gray-700">Treatment:</span>
                            <span class="text-gray-600">${disease.treatment}</span>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function getSeverityColor(severity) {
            const colors = {
                'High': 'bg-red-100 text-red-800',
                'Medium': 'bg-yellow-100 text-yellow-800',
                'Low': 'bg-green-100 text-green-800'
            };
            return colors[severity] || 'bg-gray-100 text-gray-800';
        }

        async function analyzeDisease() {
            const resultsDiv = document.getElementById('analysisResults');
            const infoDiv = document.getElementById('diseaseInfo');
            
            // Show loading state
            infoDiv.innerHTML = `
                <div class="text-center py-8">
                    <div class="loading-spinner mx-auto mb-4"></div>
                    <p class="text-gray-600">AI is analyzing your plant image...</p>
                </div>
            `;
            resultsDiv.classList.remove('hidden');
            
            // Simulate AI analysis
            await new Promise(resolve => setTimeout(resolve, 3000));
            
            const analysisResult = {
                disease: 'Leaf Blight',
                confidence: 87,
                severity: 'Medium',
                treatment: [
                    'Apply copper-based fungicide immediately',
                    'Remove affected leaves and dispose properly',
                    'Improve air circulation around plants',
                    'Reduce watering frequency',
                    'Monitor for spread to other plants'
                ],
                prevention: [
                    'Maintain proper plant spacing',
                    'Avoid overhead watering',
                    'Apply preventive fungicide sprays',
                    'Ensure good drainage'
                ]
            };
            
            infoDiv.innerHTML = `
                <div class="space-y-6">
                    <div class="text-center">
                        <div class="w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-exclamation-triangle text-3xl text-red-600"></i>
                        </div>
                        <h3 class="text-2xl font-bold text-gray-900 mb-2">${analysisResult.disease} Detected</h3>
                        <div class="flex items-center justify-center space-x-4">
                            <span class="px-4 py-2 bg-red-100 text-red-800 rounded-full text-sm font-semibold">
                                ${analysisResult.confidence}% Confidence
                            </span>
                            <span class="px-4 py-2 bg-yellow-100 text-yellow-800 rounded-full text-sm font-semibold">
                                ${analysisResult.severity} Severity
                            </span>
                        </div>
                    </div>
                    
                    <div class="bg-red-50 rounded-2xl p-6">
                        <h4 class="font-bold text-red-800 mb-3 flex items-center">
                            <i class="fas fa-medical-kit mr-2"></i>
                            Immediate Treatment Required
                        </h4>
                        <ul class="space-y-2">
                            ${analysisResult.treatment.map(step => `
                                <li class="flex items-start text-red-700 text-sm">
                                    <i class="fas fa-check-circle mr-2 mt-1 text-red-600"></i>
                                    ${step}
                                </li>
                            `).join('')}
                        </ul>
                    </div>
                    
                    <div class="bg-blue-50 rounded-2xl p-6">
                        <h4 class="font-bold text-blue-800 mb-3 flex items-center">
                            <i class="fas fa-shield-alt mr-2"></i>
                            Prevention Tips
                        </h4>
                        <ul class="space-y-2">
                            ${analysisResult.prevention.map(tip => `
                                <li class="flex items-start text-blue-700 text-sm">
                                    <i class="fas fa-lightbulb mr-2 mt-1 text-blue-600"></i>
                                    ${tip}
                                </li>
                            `).join('')}
                        </ul>
                    </div>
                </div>
            `;
            
            // Add success animation
            resultsDiv.classList.add('success-animation');
            setTimeout(() => resultsDiv.classList.remove('success-animation'), 600);
        }

        function initializeCharts() {
            // Weather Chart
            const weatherCtx = document.getElementById('weatherChart');
            if (weatherCtx) {
                weatherChart = new Chart(weatherCtx, {
                    type: 'line',
                    data: {
                        labels: [],
                        datasets: [{
                            label: 'Temperature (°C)',
                            data: [],
                            borderColor: 'rgb(59, 130, 246)',
                            backgroundColor: 'rgba(59, 130, 246, 0.1)',
                            tension: 0.4,
                            fill: true
                        }, {
                            label: 'Rainfall (%)',
                            data: [],
                            borderColor: 'rgb(16, 185, 129)',
                            backgroundColor: 'rgba(16, 185, 129, 0.1)',
                            tension: 0.4,
                            yAxisID: 'y1',
                            fill: true
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: {
                                position: 'top',
                            }
                        },
                        scales: {
                            y: {
                                type: 'linear',
                                display: true,
                                position: 'left',
                                grid: {
                                    color: 'rgba(0, 0, 0, 0.1)'
                                }
                            },
                            y1: {
                                type: 'linear',
                                display: true,
                                position: 'right',
                                grid: {
                                    drawOnChartArea: false,
                                }
                            }
                        }
                    }
                });
            }

            // Yield Chart
            const yieldCtx = document.getElementById('yieldChart');
            if (yieldCtx) {
                yieldChart = new Chart(yieldCtx, {
                    type: 'bar',
                    data: {
                        labels: ['Rice', 'Coconut', 'Pepper', 'Cardamom', 'Banana', 'Carrot'],
                        datasets: [{
                            label: 'Yield (tons/acre)',
                            data: [4.2, 2.1, 0.8, 0.4, 32, 22],
                            backgroundColor: [
                                'rgba(34, 197, 94, 0.8)',
                                'rgba(59, 130, 246, 0.8)',
                                'rgba(168, 85, 247, 0.8)',
                                'rgba(245, 158, 11, 0.8)',
                                'rgba(239, 68, 68, 0.8)',
                                'rgba(16, 185, 129, 0.8)'
                            ],
                            borderRadius: 8
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: {
                                display: false
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                grid: {
                                    color: 'rgba(0, 0, 0, 0.1)'
                                }
                            },
                            x: {
                                grid: {
                                    display: false
                                }
                            }
                        }
                    }
                });
            }

            // Revenue Chart
            const revenueCtx = document.getElementById('revenueChart');
            if (revenueCtx) {
                revenueChart = new Chart(revenueCtx, {
                    type: 'doughnut',
                    data: {
                        labels: ['Rice', 'Coconut', 'Pepper', 'Cardamom', 'Banana', 'Carrot'],
                        datasets: [{
                            data: [65000, 95000, 80000, 120000, 85000, 55000],
                            backgroundColor: [
                                '#22c55e',
                                '#3b82f6',
                                '#a855f7',
                                '#f59e0b',
                                '#ef4444',
                                '#10b981'
                            ],
                            borderWidth: 0
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: {
                                position: 'bottom',
                                labels: {
                                    padding: 20,
                                    usePointStyle: true
                                }
                            }
                        }
                    }
                });
            }
        }

        function setupEventListeners() {
            // Language selector - Desktop
            document.getElementById('languageSelect').addEventListener('change', function(e) {
                currentLanguage = e.target.value;
                updateLanguage();
                // Sync with mobile
                document.getElementById('mobileLanguageSelect').value = e.target.value;
            });

            // Mobile language selector
            document.getElementById('mobileLanguageSelect').addEventListener('change', function(e) {
                currentLanguage = e.target.value;
                updateLanguage();
                // Sync with desktop
                document.getElementById('languageSelect').value = e.target.value;
            });

            // Disease image upload
            document.getElementById('diseaseImage').addEventListener('change', function(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        document.getElementById('previewImg').src = e.target.result;
                        document.getElementById('imagePreview').classList.remove('hidden');
                    };
                    reader.readAsDataURL(file);
                }
            });

            // Crop form submission
            document.getElementById('cropForm').addEventListener('submit', function(e) {
                e.preventDefault();
                // Add loading state
                const button = e.target.querySelector('button[type="submit"]');
                const originalText = button.innerHTML;
                button.innerHTML = '<div class="loading-spinner mr-2"></div>Analyzing...';
                button.disabled = true;
                
                setTimeout(() => {
                    loadCropRecommendations();
                    button.innerHTML = originalText;
                    button.disabled = false;
                }, 2000);
            });

            // Fertilizer form submission
            document.getElementById('fertilizerForm').addEventListener('submit', function(e) {
                e.preventDefault();
                calculateFertilizer();
            });

            // Chat input Enter key support
            document.getElementById('chatInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendMessage();
                }
            });
        }

        function showSection(sectionId) {
            // Add current section to history if it's different
            if (currentSection !== sectionId) {
                if (navigationHistory[navigationHistory.length - 1] !== currentSection) {
                    navigationHistory.push(currentSection);
                }
                currentSection = sectionId;
            }
            
            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.classList.add('hidden');
            });
            
            // Show selected section
            document.getElementById(sectionId).classList.remove('hidden');
            document.getElementById(sectionId).classList.add('slide-up');
            
            // Update navigation buttons
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('bg-white', 'bg-opacity-20');
            });
            
            // Highlight active nav button
            const activeBtn = document.querySelector(`[data-section="${sectionId}"]`);
            if (activeBtn) {
                activeBtn.classList.add('bg-white', 'bg-opacity-20');
            }
            
            // Update breadcrumb
            updateBreadcrumb(sectionId);
            
            // Show/hide breadcrumb navigation
            const breadcrumbNav = document.getElementById('breadcrumbNav');
            if (sectionId === 'dashboard') {
                breadcrumbNav.classList.add('hidden');
            } else {
                breadcrumbNav.classList.remove('hidden');
            }
        }

        function goBack() {
            if (navigationHistory.length > 0) {
                const previousSection = navigationHistory.pop();
                currentSection = previousSection;
                showSection(previousSection);
            } else {
                showSection('dashboard');
            }
        }

        function updateBreadcrumb(sectionId) {
            const sectionNames = {
                dashboard: 'Dashboard',
                weather: 'Weather Intelligence',
                crops: 'Crop Management',
                disease: 'AI Disease Detection',
                fertilizer: 'Fertilizer Calculator',
                assistant: 'AI Farm Assistant',
                analytics: 'Farm Analytics',
                contributors: 'Our Team'
            };
            
            const currentSectionName = document.getElementById('currentSectionName');
            if (currentSectionName) {
                currentSectionName.textContent = sectionNames[sectionId] || 'Dashboard';
            }
        }

        function toggleMobileMenu() {
            const mobileMenu = document.getElementById('mobileMenu');
            mobileMenu.classList.toggle('hidden');
        }

        function toggleFAB() {
            const fabItems = document.getElementById('fabItems');
            const fabIcon = document.getElementById('fabIcon');
            
            if (fabItems.classList.contains('hidden')) {
                fabItems.classList.remove('hidden');
                fabIcon.className = 'fas fa-times text-xl';
                // Animate items in
                const items = fabItems.children;
                for (let i = 0; i < items.length; i++) {
                    setTimeout(() => {
                        items[i].style.transform = 'scale(1)';
                        items[i].style.opacity = '1';
                    }, i * 50);
                }
            } else {
                fabItems.classList.add('hidden');
                fabIcon.className = 'fas fa-plus text-xl';
                // Reset item styles
                const items = fabItems.children;
                for (let i = 0; i < items.length; i++) {
                    items[i].style.transform = 'scale(0)';
                    items[i].style.opacity = '0';
                }
            }
        }



        // Add crop to portfolio function
        function addToPortfolio(cropName, cropIcon) {
            // Show success notification
            showNotification(`${cropIcon} ${cropName} added to your portfolio!`, 'success');
            
            // Add visual feedback
            const button = event.target;
            const originalText = button.innerHTML;
            button.innerHTML = '<i class="fas fa-check mr-2"></i>Added Successfully!';
            button.classList.add('bg-green-600');
            button.disabled = true;
            
            setTimeout(() => {
                button.innerHTML = originalText;
                button.classList.remove('bg-green-600');
                button.disabled = false;
            }, 2000);
            
            // Update portfolio count in dashboard
            updatePortfolioStats();
        }

        // Get detailed crop analysis
        function getCropDetails(cropName) {
            showNotification(`🤖 Generating detailed AI analysis for ${cropName}...`, 'info');
            
            // Simulate AI analysis
            setTimeout(() => {
                const analysisModal = `
                    <div id="cropAnalysisModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
                        <div class="bg-white rounded-3xl p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto">
                            <div class="flex justify-between items-center mb-6">
                                <h2 class="text-3xl font-bold text-gray-900">🤖 AI Analysis: ${cropName}</h2>
                                <button onclick="closeModal()" class="text-gray-500 hover:text-gray-700 text-2xl">×</button>
                            </div>
                            
                            <div class="space-y-6">
                                <div class="bg-gradient-to-r from-green-50 to-blue-50 rounded-2xl p-6">
                                    <h3 class="font-bold text-lg mb-3 text-green-800">🎯 AI Recommendation Score</h3>
                                    <div class="text-4xl font-black text-green-600 mb-2">94%</div>
                                    <p class="text-green-700">Highly recommended for your farm conditions</p>
                                </div>
                                
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div class="bg-blue-50 rounded-xl p-4">
                                        <h4 class="font-bold text-blue-800 mb-2">💰 Profit Analysis</h4>
                                        <ul class="text-sm text-blue-700 space-y-1">
                                            <li>• Expected ROI: 180-220%</li>
                                            <li>• Break-even: 8-12 months</li>
                                            <li>• Market stability: High</li>
                                        </ul>
                                    </div>
                                    
                                    <div class="bg-purple-50 rounded-xl p-4">
                                        <h4 class="font-bold text-purple-800 mb-2">⚠️ Risk Assessment</h4>
                                        <ul class="text-sm text-purple-700 space-y-1">
                                            <li>• Weather risk: Low</li>
                                            <li>• Market risk: Medium</li>
                                            <li>• Disease risk: Low</li>
                                        </ul>
                                    </div>
                                </div>
                                
                                <div class="bg-yellow-50 rounded-xl p-4">
                                    <h4 class="font-bold text-yellow-800 mb-3">📋 AI Action Plan</h4>
                                    <ol class="text-sm text-yellow-700 space-y-2">
                                        <li>1. Soil preparation: Start in next 2 weeks</li>
                                        <li>2. Seed procurement: High-yield varieties recommended</li>
                                        <li>3. Irrigation setup: Drip system optimal</li>
                                        <li>4. Fertilizer schedule: AI-optimized nutrition plan</li>
                                        <li>5. Harvest timing: Market price prediction included</li>
                                    </ol>
                                </div>
                                
                                <button onclick="addToPortfolio('${cropName}', '🌱'); closeModal();" class="w-full bg-gradient-to-r from-green-500 to-blue-600 text-white px-6 py-4 rounded-xl hover:from-green-600 hover:to-blue-700 transition-all duration-300 font-bold text-lg">
                                    <i class="fas fa-plus mr-2"></i>
                                    Add ${cropName} to Portfolio
                                </button>
                            </div>
                        </div>
                    </div>
                `;
                
                document.body.insertAdjacentHTML('beforeend', analysisModal);
            }, 1500);
        }

        // Close modal function
        function closeModal() {
            const modal = document.getElementById('cropAnalysisModal');
            if (modal) {
                modal.remove();
            }
        }

        // Show notification function
        function showNotification(message, type = 'info') {
            const colors = {
                success: 'bg-green-500',
                error: 'bg-red-500',
                info: 'bg-blue-500',
                warning: 'bg-yellow-500'
            };
            
            const notification = document.createElement('div');
            notification.className = `fixed top-4 right-4 ${colors[type]} text-white px-6 py-4 rounded-xl shadow-lg z-50 transform translate-x-full transition-transform duration-300`;
            notification.innerHTML = `
                <div class="flex items-center space-x-3">
                    <span>${message}</span>
                    <button onclick="this.parentElement.parentElement.remove()" class="text-white hover:text-gray-200">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            // Slide in
            setTimeout(() => {
                notification.classList.remove('translate-x-full');
            }, 100);
            
            // Auto remove after 5 seconds
            setTimeout(() => {
                notification.classList.add('translate-x-full');
                setTimeout(() => notification.remove(), 300);
            }, 5000);
        }

        // Update portfolio stats
        function updatePortfolioStats() {
            // This would update dashboard statistics
            const portfolioCount = document.querySelector('#portfolioCount');
            if (portfolioCount) {
                const current = parseInt(portfolioCount.textContent) || 0;
                portfolioCount.textContent = current + 1;
            }
        }

        // Fertilizer calculation functions
        function calculateFertilizer() {
            const cropType = document.getElementById('cropType').value;
            const farmArea = parseFloat(document.getElementById('farmArea').value);
            const growthStage = document.getElementById('growthStage').value;
            const soilType = document.getElementById('soilType').value;
            const targetYield = parseFloat(document.getElementById('targetYield').value);
            
            // Optional soil test values
            const soilN = parseFloat(document.getElementById('soilN').value) || 0;
            const soilP = parseFloat(document.getElementById('soilP').value) || 0;
            const soilK = parseFloat(document.getElementById('soilK').value) || 0;

            // Show loading state
            const button = document.querySelector('#fertilizerForm button[type="submit"]');
            const originalText = button.innerHTML;
            button.innerHTML = '<div class="loading-spinner mr-2"></div>Calculating...';
            button.disabled = true;

            setTimeout(() => {
                const results = performFertilizerCalculation(cropType, farmArea, growthStage, soilType, targetYield, soilN, soilP, soilK);
                displayFertilizerResults(results);
                
                button.innerHTML = originalText;
                button.disabled = false;
                
                // Show results section
                document.getElementById('fertilizerResults').classList.remove('hidden');
                document.getElementById('fertilizerResults').scrollIntoView({ behavior: 'smooth' });
            }, 2000);
        }

        function performFertilizerCalculation(cropType, farmArea, growthStage, soilType, targetYield, soilN, soilP, soilK) {
            // Crop-specific nutrient requirements (kg/ton of yield)
            const cropRequirements = {
                rice: { N: 20, P: 10, K: 25 },
                wheat: { N: 25, P: 12, K: 20 },
                corn: { N: 22, P: 10, K: 18 },
                cotton: { N: 60, P: 25, K: 50 },
                sugarcane: { N: 2, P: 0.8, K: 3 },
                potato: { N: 4, P: 2, K: 6 },
                tomato: { N: 3, P: 1.5, K: 4 },
                onion: { N: 2.5, P: 1, K: 3 },
                banana: { N: 6, P: 2, K: 15 },
                coconut: { N: 0.5, P: 0.2, K: 1.2 }
            };

            // Growth stage multipliers
            const stageMultipliers = {
                seedling: { N: 0.3, P: 0.4, K: 0.2 },
                vegetative: { N: 0.4, P: 0.3, K: 0.3 },
                flowering: { N: 0.2, P: 0.4, K: 0.4 },
                fruiting: { N: 0.1, P: 0.3, K: 0.5 },
                maturity: { N: 0.05, P: 0.1, K: 0.2 }
            };

            // Soil type efficiency factors
            const soilEfficiency = {
                clay: { N: 0.8, P: 0.9, K: 0.95 },
                loam: { N: 0.9, P: 0.85, K: 0.85 },
                sandy: { N: 0.7, P: 0.8, K: 0.7 },
                silt: { N: 0.85, P: 0.9, K: 0.8 },
                laterite: { N: 0.75, P: 0.7, K: 0.8 },
                alluvial: { N: 0.9, P: 0.9, K: 0.9 }
            };

            const crop = cropRequirements[cropType];
            const stage = stageMultipliers[growthStage];
            const efficiency = soilEfficiency[soilType];

            // Calculate total nutrient requirement
            const totalN = (crop.N * targetYield * farmArea * stage.N) / efficiency.N;
            const totalP = (crop.P * targetYield * farmArea * stage.P) / efficiency.P;
            const totalK = (crop.K * targetYield * farmArea * stage.K) / efficiency.K;

            // Subtract available nutrients from soil
            const requiredN = Math.max(0, totalN - (soilN * farmArea * 2.47)); // Convert ha to acres
            const requiredP = Math.max(0, totalP - (soilP * farmArea * 2.47));
            const requiredK = Math.max(0, totalK - (soilK * farmArea * 2.47));

            // Convert to fertilizer quantities (considering fertilizer composition)
            const urea = requiredN / 0.46; // Urea is 46% N
            const dap = requiredP / 0.46; // DAP is 46% P2O5
            const mop = requiredK / 0.60; // MOP is 60% K2O

            // Calculate costs (approximate prices in INR per kg)
            const prices = { urea: 6, dap: 24, mop: 17 };
            const totalCost = (urea * prices.urea) + (dap * prices.dap) + (mop * prices.mop);

            // AI optimization suggestions
            const optimizations = generateOptimizations(cropType, growthStage, soilType, requiredN, requiredP, requiredK);

            return {
                cropType,
                farmArea,
                growthStage,
                soilType,
                targetYield,
                nutrients: {
                    nitrogen: Math.round(requiredN * 10) / 10,
                    phosphorus: Math.round(requiredP * 10) / 10,
                    potassium: Math.round(requiredK * 10) / 10
                },
                fertilizers: {
                    urea: Math.round(urea * 10) / 10,
                    dap: Math.round(dap * 10) / 10,
                    mop: Math.round(mop * 10) / 10
                },
                cost: Math.round(totalCost),
                optimizations,
                efficiency: Math.round(((efficiency.N + efficiency.P + efficiency.K) / 3) * 100),
                aiScore: Math.round(85 + Math.random() * 15)
            };
        }

        function generateOptimizations(cropType, growthStage, soilType, N, P, K) {
            const optimizations = [];
            
            if (N > P * 2) {
                optimizations.push({
                    type: 'nutrient',
                    icon: '🔬',
                    title: 'Nitrogen Optimization',
                    message: 'Consider split application of nitrogen for better efficiency',
                    impact: 'High'
                });
            }
            
            if (soilType === 'sandy') {
                optimizations.push({
                    type: 'soil',
                    icon: '🌱',
                    title: 'Soil Enhancement',
                    message: 'Add organic matter to improve nutrient retention in sandy soil',
                    impact: 'Medium'
                });
            }
            
            if (growthStage === 'flowering') {
                optimizations.push({
                    type: 'timing',
                    icon: '⏰',
                    title: 'Application Timing',
                    message: 'Increase potassium during flowering for better fruit development',
                    impact: 'High'
                });
            }
            
            optimizations.push({
                type: 'efficiency',
                icon: '💡',
                title: 'Smart Application',
                message: 'Use drip fertigation for 30% better nutrient uptake',
                impact: 'High'
            });

            return optimizations;
        }

        function displayFertilizerResults(results) {
            // Main calculations display
            const calculationsDiv = document.getElementById('fertilizerCalculations');
            calculationsDiv.innerHTML = `
                <div class="bg-gradient-to-r from-green-50 to-blue-50 rounded-3xl p-8 mb-6">
                    <div class="flex items-center justify-between mb-6">
                        <div>
                            <h3 class="text-2xl font-bold text-gray-900 mb-2">🎯 AI-Optimized Fertilizer Plan</h3>
                            <p class="text-gray-600">For ${results.farmArea} acres of ${results.cropType} (${results.growthStage} stage)</p>
                        </div>
                        <div class="text-right">
                            <div class="text-3xl font-black text-green-600">${results.aiScore}%</div>
                            <div class="text-sm text-green-700 font-semibold">AI Confidence</div>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                        <div class="bg-white rounded-2xl p-6 shadow-lg">
                            <div class="flex items-center mb-4">
                                <div class="w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center mr-4">
                                    <i class="fas fa-leaf text-blue-600 text-xl"></i>
                                </div>
                                <div>
                                    <h4 class="font-bold text-gray-900">Nitrogen (N)</h4>
                                    <p class="text-sm text-gray-600">Growth & Leaves</p>
                                </div>
                            </div>
                            <div class="text-2xl font-black text-blue-600 mb-2">${results.nutrients.nitrogen} kg</div>
                            <div class="text-sm text-gray-600">Urea: ${results.fertilizers.urea} kg</div>
                        </div>
                        
                        <div class="bg-white rounded-2xl p-6 shadow-lg">
                            <div class="flex items-center mb-4">
                                <div class="w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center mr-4">
                                    <i class="fas fa-seedling text-purple-600 text-xl"></i>
                                </div>
                                <div>
                                    <h4 class="font-bold text-gray-900">Phosphorus (P)</h4>
                                    <p class="text-sm text-gray-600">Roots & Flowers</p>
                                </div>
                            </div>
                            <div class="text-2xl font-black text-purple-600 mb-2">${results.nutrients.phosphorus} kg</div>
                            <div class="text-sm text-gray-600">DAP: ${results.fertilizers.dap} kg</div>
                        </div>
                        
                        <div class="bg-white rounded-2xl p-6 shadow-lg">
                            <div class="flex items-center mb-4">
                                <div class="w-12 h-12 bg-orange-100 rounded-xl flex items-center justify-center mr-4">
                                    <i class="fas fa-apple-alt text-orange-600 text-xl"></i>
                                </div>
                                <div>
                                    <h4 class="font-bold text-gray-900">Potassium (K)</h4>
                                    <p class="text-sm text-gray-600">Fruits & Disease Resistance</p>
                                </div>
                            </div>
                            <div class="text-2xl font-black text-orange-600 mb-2">${results.nutrients.potassium} kg</div>
                            <div class="text-sm text-gray-600">MOP: ${results.fertilizers.mop} kg</div>
                        </div>
                    </div>
                    
                    <div class="bg-gradient-to-r from-yellow-50 to-orange-50 rounded-2xl p-6">
                        <h4 class="font-bold text-orange-800 mb-3">🤖 AI Optimizations</h4>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            ${results.optimizations.map(opt => `
                                <div class="flex items-start space-x-3">
                                    <div class="text-2xl">${opt.icon}</div>
                                    <div>
                                        <h5 class="font-semibold text-orange-800">${opt.title}</h5>
                                        <p class="text-sm text-orange-700">${opt.message}</p>
                                        <span class="text-xs bg-orange-200 text-orange-800 px-2 py-1 rounded-full font-bold">${opt.impact} Impact</span>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>
            `;

            // Application schedule
            const scheduleDiv = document.getElementById('applicationSchedule');
            const schedule = generateApplicationSchedule(results);
            scheduleDiv.innerHTML = schedule.map((app, index) => `
                <div class="bg-gradient-to-r from-blue-50 to-purple-50 rounded-2xl p-6 flex items-center justify-between">
                    <div class="flex items-center space-x-4">
                        <div class="w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-xl flex items-center justify-center font-bold">
                            ${index + 1}
                        </div>
                        <div>
                            <h4 class="font-bold text-gray-900">${app.stage}</h4>
                            <p class="text-sm text-gray-600">${app.timing}</p>
                        </div>
                    </div>
                    <div class="text-right">
                        <div class="font-bold text-gray-900">${app.fertilizer}</div>
                        <div class="text-sm text-gray-600">${app.amount}</div>
                        <div class="text-xs text-blue-600 font-semibold">${app.method}</div>
                    </div>
                </div>
            `).join('');

            // Cost analysis
            const costDiv = document.getElementById('costAnalysis');
            costDiv.innerHTML = `
                <div class="bg-gradient-to-r from-green-50 to-emerald-50 rounded-2xl p-6 text-center">
                    <div class="w-16 h-16 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-rupee-sign text-white text-2xl"></i>
                    </div>
                    <h3 class="text-lg font-bold text-green-800 mb-2">Total Cost</h3>
                    <div class="text-3xl font-black text-green-600 mb-2">₹${results.cost.toLocaleString()}</div>
                    <p class="text-sm text-green-700">For ${results.farmArea} acres</p>
                </div>
                
                <div class="bg-gradient-to-r from-blue-50 to-cyan-50 rounded-2xl p-6 text-center">
                    <div class="w-16 h-16 bg-blue-500 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-percentage text-white text-2xl"></i>
                    </div>
                    <h3 class="text-lg font-bold text-blue-800 mb-2">Efficiency Score</h3>
                    <div class="text-3xl font-black text-blue-600 mb-2">${results.efficiency}%</div>
                    <p class="text-sm text-blue-700">Nutrient utilization</p>
                </div>
                
                <div class="bg-gradient-to-r from-purple-50 to-pink-50 rounded-2xl p-6 text-center">
                    <div class="w-16 h-16 bg-purple-500 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-piggy-bank text-white text-2xl"></i>
                    </div>
                    <h3 class="text-lg font-bold text-purple-800 mb-2">Potential Savings</h3>
                    <div class="text-3xl font-black text-purple-600 mb-2">₹${Math.round(results.cost * 0.3).toLocaleString()}</div>
                    <p class="text-sm text-purple-700">vs traditional methods</p>
                </div>
            `;
        }

        function generateApplicationSchedule(results) {
            const schedules = {
                rice: [
                    { stage: 'Basal Application', timing: 'At planting', fertilizer: 'DAP + MOP', amount: '50% P + 50% K', method: 'Broadcast & incorporate' },
                    { stage: 'First Top Dressing', timing: '20-25 days after planting', fertilizer: 'Urea', amount: '50% N', method: 'Side placement' },
                    { stage: 'Second Top Dressing', timing: 'Panicle initiation', fertilizer: 'Urea + MOP', amount: '50% N + 50% K', method: 'Side placement' }
                ],
                wheat: [
                    { stage: 'Basal Application', timing: 'At sowing', fertilizer: 'DAP + MOP', amount: '100% P + 50% K', method: 'Drill with seed' },
                    { stage: 'First Top Dressing', timing: '20-25 days after sowing', fertilizer: 'Urea', amount: '50% N', method: 'Broadcast' },
                    { stage: 'Second Top Dressing', timing: 'Crown root initiation', fertilizer: 'Urea + MOP', amount: '50% N + 50% K', method: 'Side placement' }
                ],
                cotton: [
                    { stage: 'Basal Application', timing: 'At planting', fertilizer: 'DAP + MOP', amount: '25% N + 100% P + 50% K', method: 'Band placement' },
                    { stage: 'First Top Dressing', timing: '30 days after planting', fertilizer: 'Urea', amount: '25% N', method: 'Side placement' },
                    { stage: 'Second Top Dressing', timing: 'Square formation', fertilizer: 'Urea + MOP', amount: '25% N + 25% K', method: 'Side placement' },
                    { stage: 'Third Top Dressing', timing: 'Flowering', fertilizer: 'Urea + MOP', amount: '25% N + 25% K', method: 'Foliar spray' }
                ]
            };

            return schedules[results.cropType] || schedules.rice;
        }

        function loadFertilizerKnowledge() {
            const knowledge = [
                {
                    title: 'Nitrogen (N)',
                    icon: '🌿',
                    color: 'blue',
                    description: 'Essential for vegetative growth and chlorophyll formation',
                    deficiency: 'Yellowing of older leaves, stunted growth',
                    sources: 'Urea, Ammonium Sulfate, CAN',
                    timing: 'Split application for better efficiency'
                },
                {
                    title: 'Phosphorus (P)',
                    icon: '🌱',
                    color: 'purple',
                    description: 'Crucial for root development and energy transfer',
                    deficiency: 'Purple discoloration, poor root growth',
                    sources: 'DAP, SSP, Rock Phosphate',
                    timing: 'Apply at planting for best results'
                },
                {
                    title: 'Potassium (K)',
                    icon: '🍎',
                    color: 'orange',
                    description: 'Important for fruit quality and disease resistance',
                    deficiency: 'Leaf margin burning, poor fruit quality',
                    sources: 'MOP, SOP, Potassium Nitrate',
                    timing: 'Critical during flowering and fruiting'
                },
                {
                    title: 'Secondary Nutrients',
                    icon: '⚖️',
                    color: 'green',
                    description: 'Calcium, Magnesium, and Sulfur for balanced nutrition',
                    deficiency: 'Various symptoms depending on nutrient',
                    sources: 'Gypsum, Lime, Epsom Salt',
                    timing: 'Apply based on soil test results'
                },
                {
                    title: 'Micronutrients',
                    icon: '🔬',
                    color: 'indigo',
                    description: 'Iron, Zinc, Boron etc. needed in small quantities',
                    deficiency: 'Interveinal chlorosis, poor flowering',
                    sources: 'Chelated forms, Foliar sprays',
                    timing: 'Foliar application during active growth'
                },
                {
                    title: 'Organic Fertilizers',
                    icon: '🌾',
                    color: 'yellow',
                    description: 'Slow-release nutrients with soil health benefits',
                    deficiency: 'Gradual nutrient depletion',
                    sources: 'Compost, FYM, Vermicompost',
                    timing: 'Apply before planting season'
                }
            ];

            const container = document.getElementById('fertilizerKnowledge');
            container.innerHTML = knowledge.map(item => `
                <div class="bg-white rounded-3xl shadow-xl p-6 card-hover">
                    <div class="text-center mb-4">
                        <div class="w-16 h-16 bg-${item.color}-100 rounded-full flex items-center justify-center mx-auto mb-4">
                            <span class="text-3xl">${item.icon}</span>
                        </div>
                        <h3 class="text-xl font-bold text-gray-900 mb-2">${item.title}</h3>
                        <p class="text-sm text-gray-600 mb-4">${item.description}</p>
                    </div>
                    
                    <div class="space-y-3 text-sm">
                        <div class="bg-red-50 rounded-lg p-3">
                            <div class="font-semibold text-red-800 mb-1">Deficiency Signs:</div>
                            <div class="text-red-700">${item.deficiency}</div>
                        </div>
                        <div class="bg-green-50 rounded-lg p-3">
                            <div class="font-semibold text-green-800 mb-1">Common Sources:</div>
                            <div class="text-green-700">${item.sources}</div>
                        </div>
                        <div class="bg-blue-50 rounded-lg p-3">
                            <div class="font-semibold text-blue-800 mb-1">Application Timing:</div>
                            <div class="text-blue-700">${item.timing}</div>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function updateLanguage() {
            const trans = translations[currentLanguage];
            if (trans) {
                // Update navigation
                document.querySelectorAll('.nav-btn span').forEach((span, index) => {
                    const keys = ['dashboard', 'weather', 'crops', 'disease', 'fertilizer', 'analytics'];
                    if (keys[index] && trans[keys[index]]) {
                        span.textContent = trans[keys[index]];
                    }
                });
                
                // Update hero section
                const heroTitle = document.querySelector('h1');
                if (heroTitle) {
                    heroTitle.innerHTML = `
                        ${trans.smartAgriculture}
                        <span class="block text-transparent bg-clip-text bg-gradient-to-r from-yellow-300 to-green-300">
                            ${trans.poweredByAI}
                        </span>
                    `;
                }
                
                // Update dashboard cards
                updateDashboardCards(trans);
                
                // Update buttons
                const getStartedBtn = document.querySelector('button[onclick="showSection(\'weather\')"]');
                if (getStartedBtn) {
                    getStartedBtn.innerHTML = `<i class="fas fa-rocket mr-2"></i>${trans.getStarted}`;
                }
                
                const viewDemoBtn = document.querySelector('button[onclick="showSection(\'analytics\')"]');
                if (viewDemoBtn) {
                    viewDemoBtn.innerHTML = `<i class="fas fa-play mr-2"></i>${trans.viewDemo}`;
                }
            }
        }

        function updateDashboardCards(trans) {
            // Update weather card
            const weatherCardTitle = document.querySelector('.weather-card h3');
            if (weatherCardTitle) {
                weatherCardTitle.textContent = trans.liveWeather;
            }
            
            // Update crop health card
            const cropCardTitle = document.querySelector('.crop-card h3');
            if (cropCardTitle) {
                cropCardTitle.textContent = trans.cropHealth;
            }
            
            // Update alerts card
            const alertCardTitle = document.querySelector('.alert-card h3');
            if (alertCardTitle) {
                alertCardTitle.textContent = trans.smartAlerts;
            }
            
            // Update AI predictions card
            const aiCardTitle = document.querySelector('.analytics-card h3');
            if (aiCardTitle) {
                aiCardTitle.textContent = trans.aiPredictions;
            }
        }
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'982c7c0746c0936e',t:'MTc1ODQ4ODM0Ny4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>